# セットアップチェックリスト

## 🎯 マイページシステム実装完了！

### ✅ 実装済み項目

- [x] **マイページ（ダッシュボード）作成**
  - メールログイン画面
  - ポイント表示システム
  - ランク機能（ブロンズ/シルバー/ゴールド/ダイヤモンド）
  - 特典申請フォーム
  - プラン別コンテンツ表示

- [x] **ポイント・ランクシステム**
  - 累計ポイント表示
  - プログレスバー
  - ランク自動判定
  - 特典申請機能（1000pt以上）

- [x] **API設計**
  - マジックリンク認証API
  - Zapier Webhook連携

- [x] **ドキュメント作成**
  - Airtableセットアップガイド
  - Zapier設定ガイド
  - 環境変数設定例

---

## 🚀 次の作業（Zapier設定）

### 1. Airtable設定
- [ ] **Airtableでベース作成**
  - ベース名: `NANKANアナリティクス顧客管理`
  - Customersテーブル作成
  - フィールド設定（Email, 氏名, プラン, ポイント等）
  - 📚 参考: `docs/AIRTABLE_SETUP_GUIDE.md`

- [ ] **APIトークン取得**
  - Personal Access Token作成
  - ベースID取得
  - テストデータ追加

### 2. Zapier設定
- [ ] **ポイント付与自動化Zap**
  - Webhook → Airtable → Brevo
  - 的中結果でポイント付与

- [ ] **特典申請処理Zap**
  - Webhook → Airtable → Gmail（管理者）→ Brevo（顧客）

- [ ] **マジックリンク認証Zap**
  - Webhook → Airtable → Code → Brevo
  - 30分有効な認証リンク送信

- [ ] **Webhook URL取得**
  - 各ZapのWebhook URLをメモ
  - 📚 参考: `docs/ZAPIER_SETUP_GUIDE.md`

### 3. 環境変数設定
- [ ] **`.env`ファイル作成**
  ```bash
  cp .env.example .env
  ```
- [ ] **実際の値を設定**
  - AIRTABLE_API_KEY
  - AIRTABLE_BASE_ID
  - ZAPIER_*_WEBHOOK URLs

### 4. テスト
- [ ] **マイページ動作確認**
  - http://localhost:4321/dashboard
  - メールログイン
  - ポイント表示
  - 特典申請ボタン

- [ ] **Zapier連携テスト**
  - ポイント付与テスト
  - 特典申請テスト
  - メール送信確認

---

## 🎉 完成後の機能

### 顧客体験フロー
```
1. メールアドレス入力
2. 認証リンクをメールで受信
3. マイページで情報確認
   - 会員ステータス
   - 累計ポイント・ランク
   - プログレスバー
   - 特典申請ボタン
4. 1000pt到達で特典申請
5. 管理者に自動通知
```

### マコさんの管理体験
```
1. 的中結果入力（手動）
2. Zapierが自動でポイント付与
3. 顧客に獲得通知メール送信
4. 特典申請があれば即座に通知
5. Airtableでワンクリック管理
```

---

## 💡 運用のポイント

### 管理が簡単な理由
- **Airtable**: 直感的なデータ管理
- **Zapier**: エラー通知＆自動リトライ
- **Brevo**: メール配信の安定性
- **シンプル設計**: 複雑なコードなし

### エラー対策
- Zapierの履歴でトラブル確認
- 失敗時の自動リトライ
- デモモードでの開発継続

---

## 📞 次のステップ

**まずはAirtableの設定から始めましょう！**
1. `docs/AIRTABLE_SETUP_GUIDE.md`を参照
2. テーブル作成
3. APIトークン取得

準備ができたらZapier設定に進みます。