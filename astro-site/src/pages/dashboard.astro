---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="ダッシュボード">
    <div class="container mx-auto px-4 py-12">
        <h1 class="text-3xl font-bold mb-6">ダッシュボード</h1>
        <div class="bg-slate-800 p-6 rounded-xl">
            <h2 class="text-xl font-semibold mb-4">会員ステータス</h2>
            <div id="status">読み込み中...</div>
        </div>
    </div>
    
    <script type="module">
        import { createClient } from 'https://cdn.skypack.dev/@supabase/supabase-js@2';
        const client = createClient(
            'https://qysycsrhaatudnksbpqe.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF5c3ljc3JoYWF0dWRua3NicHFlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MzM3MjcsImV4cCI6MjA3MTUwOTcyN30.UDWi7FYqpJNpMhvMMaZoGMXwuD1R2PNH4Tk6Xs1u1pU'
        );
        
        document.addEventListener('DOMContentLoaded', async () => {
            const status = document.getElementById('status');
            const { data: { user }, error } = await client.auth.getUser();
            
            if (user) {
                status.innerHTML = `ログイン中: ${user.email}`;
            } else {
                status.innerHTML = '未ログイン - <a href="/auth/login">ログインする</a>';
            }
        });
    </script>
</BaseLayout>