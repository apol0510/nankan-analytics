---
export const prerender = true;
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout title="è²·ã„ç›®ç›´æ¥å…¥åŠ›ã‚·ã‚¹ãƒ†ãƒ ï¼ˆSimpleç‰ˆï¼‰" description="ã‚·ãƒ³ãƒ—ãƒ«ãªå…¨é¦¬è¡¨ç¤ºå¯¾å¿œç‰ˆ">
    <div class="container">
        <div class="header-section">
            <div class="ai-badge">
                <span class="pulse"></span>
                <span class="ai-status">Simpleç‰ˆ - ç¢ºå®Ÿå‹•ä½œ</span>
            </div>
            <h1>ğŸ¯ è²·ã„ç›®ç›´æ¥å…¥åŠ›ã‚·ã‚¹ãƒ†ãƒ ï¼ˆSimpleç‰ˆï¼‰</h1>
            <p class="subtitle">ã‚·ãƒ³ãƒ—ãƒ«è¨­è¨ˆã§å…¨é¦¬æƒ…å ±ã‚’ç¢ºå®Ÿè¡¨ç¤º</p>
            <div class="guarantee-box">
                <h3>ğŸ’– Simpleç‰ˆã®ç‰¹å¾´</h3>
                <ul>
                    <li>âœ… <strong>ã‚·ãƒ³ãƒ—ãƒ«è¨­è¨ˆ</strong>: åˆ†ã‹ã‚Šã‚„ã™ã„ãƒ‡ãƒ¼ã‚¿å‡¦ç†</li>
                    <li>âœ… <strong>å…¨é¦¬è¡¨ç¤º</strong>: è¨˜è¼‰ã•ã‚ŒãŸå…¨é¦¬æƒ…å ±ã‚’è¡¨ç¤º</li>
                    <li>âœ… <strong>é‡è¦åº¦é †</strong>: æœ¬å‘½â†’å¯¾æŠ—â†’å˜ç©´â†’é€£ä¸‹â†’æŠ¼ã•ãˆé †</li>
                    <li>âœ… <strong>ç¢ºå®Ÿå‹•ä½œ</strong>: è¤‡é›‘ãªå‡¦ç†ã‚’é¿ã‘ã¦å®‰å®šæ€§é‡è¦–</li>
                </ul>
            </div>
        </div>

        <div class="form-section">
            <div class="input-section">
                <h2>ğŸ“ å®Œæˆãƒ‡ãƒ¼ã‚¿å…¥åŠ›</h2>
                <div class="format-guide">
                    <p><strong>Simpleç‰ˆå¯¾å¿œå½¢å¼:</strong> å„é¦¬ã®æƒ…å ±ã‚’1è¡Œãšã¤è¨˜è¼‰</p>
                    <p>ä¾‹: â— 11 ã‚ªãƒ¼ãƒ«ã‚¹ã‚¿ãƒ¼ã‚º æœ¬å‘½ ç·åˆè©•ä¾¡:â˜…â˜…â˜… ç´¯ç©ã‚¹ã‚³ã‚¢: 88pt</p>
                </div>
                <textarea
                    id="simple-data"
                    placeholder="ãƒã‚³ã¡ã‚ƒã‚“ã®å®Œæˆãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„...

ä¾‹ï¼š
å¤§äº•ç«¶é¦¬9/17
1R
â— 11 ã‚ªãƒ¼ãƒ«ã‚¹ã‚¿ãƒ¼ã‚º æœ¬å‘½ ç·åˆè©•ä¾¡:â˜…â˜…â˜… ç´¯ç©ã‚¹ã‚³ã‚¢: 88pt ç‰¹å¾´é‡é‡è¦åº¦ å®‰å®šæ€§91% èƒ½åŠ›ä¸Šä½æ€§90% å±•é–‹åˆ©81%
â—‹ 5 ã‚·ãƒ£ãƒ¼ã‚¯ã‚¦ã‚©ãƒ¼ãƒ‹ãƒ³ å¯¾æŠ— ç·åˆè©•ä¾¡:â˜…â˜…â˜… ç´¯ç©ã‚¹ã‚³ã‚¢: 87pt ç‰¹å¾´é‡é‡è¦åº¦ å®‰å®šæ€§97% èƒ½åŠ›ä¸Šä½æ€§79% å±•é–‹åˆ©82%
â–² 9 ãƒ•ã‚§ã‚¢ã‚¯ãƒ©ã‚¦ãƒ‰ å˜ç©´ ç·åˆè©•ä¾¡:â˜…â˜…â˜… ç´¯ç©ã‚¹ã‚³ã‚¢: 82pt
â–² 6 ãƒ‘ãƒ³ã‚ªã‚·ãƒ§ã‚³ãƒ© å˜ç©´ ç·åˆè©•ä¾¡:â˜…â˜…â˜… ç´¯ç©ã‚¹ã‚³ã‚¢: 76pt
â–³ é€£ä¸‹å€™è£œé¦¬ 4 ãƒ™ãƒƒãƒ†ã‚£ãƒ¼ãƒŠ (75pt) 13 ãƒ–ãƒƒã‚³ãƒ¯ãƒ¼ã‚¹ (75pt) 10 ãƒ–ãƒ©ãƒ³ãƒˆãƒ³ã‚¢ãƒ­ãƒ¼ (75pt) 14 ãƒãƒ³ã‚¹ãƒˆãƒƒãƒ—ã‚¬ãƒ¼ãƒ« (75pt)
Ã— æŠ‘ãˆå€™è£œé¦¬ 2 ãƒ¬ãƒ‡ã‚£ãƒ´ã‚£ã‚¯ãƒˆãƒªã‚¢ (66pt) 7 ã‚ªãƒ‹ã‚¯ãƒ€ã‚¤ã‚¹ã‚­ãƒãƒ³ (66pt) 12 ã‚°ã‚¡ãƒ³ãƒ€ã‚ª (66pt)

è²·ã„ç›®
å°‘ç‚¹æ•°çš„ä¸­å‹ãƒ¢ãƒ‡ãƒ« é¦¬å˜ 11 â†’ 5,6,9ã€€3ç‚¹ AIäºˆæ¸¬58%
ãƒãƒ©ãƒ³ã‚¹å‹ãƒ¢ãƒ‡ãƒ« é¦¬å˜ 5,6,9 â†’ 11ã€€3ç‚¹ é¦¬å˜ 11 â‡” 4,10,13,14ã€€8ç‚¹ é¦¬å˜ 5 â†’ 6,9ã€€2ç‚¹ AIäºˆæ¸¬67%
é«˜é…å½“è¿½æ±‚å‹ãƒ¢ãƒ‡ãƒ« é¦¬å˜ 11 â†’ 2,7,12ã€€3ç‚¹ é¦¬å˜ 5 â‡” 2,4,7,10,12,13,14ã€€14ç‚¹ AIäºˆæ¸¬43%"
                    rows="25"></textarea>
            </div>

            <div class="action-buttons">
                <button type="button" id="simple-parse-btn" class="btn-primary">ğŸ“‹ è§£æãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
                <button type="button" id="simple-update-json-btn" class="btn-success" style="display: none;">ğŸš€ JSONæ›´æ–°å®Ÿè¡Œ</button>
                <a href="/premium-predictions" id="simple-check-result-btn" class="btn-check" style="display: none;">ğŸ‘€ çµæœç¢ºèª</a>
            </div>
        </div>

        <div id="simple-preview-section" class="preview-section" style="display: none;">
            <h2>ğŸ“‹ è§£æçµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆSimpleç‰ˆï¼‰</h2>
            <div id="simple-preview-content"></div>
        </div>

        <div id="simple-success-section" class="success-section" style="display: none;">
            <h2>âœ… æ›´æ–°å®Œäº†</h2>
            <p>å…¨ãƒ‡ãƒ¼ã‚¿ãŒæ­£å¸¸ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸï¼</p>
            <p><strong>premium-predictions/</strong> ã§çµæœã‚’ã”ç¢ºèªãã ã•ã„ã€‚</p>
        </div>
    </div>

    <script>
        let simpleParsedData = null;

        // Simpleç‰ˆè§£æå‡¦ç†
        document.getElementById('simple-parse-btn').addEventListener('click', function() {
            const inputData = document.getElementById('simple-data').value;

            if (!inputData.trim()) {
                alert('ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            try {
                simpleParsedData = parseSimpleData(inputData);
                displaySimplePreview(simpleParsedData);

                document.getElementById('simple-preview-section').style.display = 'block';
                document.getElementById('simple-update-json-btn').style.display = 'inline-block';
                document.getElementById('simple-check-result-btn').style.display = 'inline-block';
            } catch (error) {
                alert('ãƒ‡ãƒ¼ã‚¿ã®è§£æã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
                console.error('Simple Parse error:', error);
            }
        });

        // Simpleç‰ˆãƒ‡ãƒ¼ã‚¿è§£æé–¢æ•°
        function parseSimpleData(data) {
            const lines = data.split('\n').map(line => line.trim()).filter(line => line);
            const raceData = {};
            let currentRace = null;
            let currentType = null; // é€£ä¸‹ãƒ»æŠ¼ã•ãˆå€™è£œé¦¬ã®è§£æç”¨

            console.log('ğŸ” Simpleç‰ˆãƒ‡ãƒ¼ã‚¿è§£æé–‹å§‹');

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                console.log(`ğŸ“ å‡¦ç†ä¸­: "${line}"`);

                // ãƒ¬ãƒ¼ã‚¹ç•ªå·æ¤œå‡º
                const raceMatch = line.match(/^([0-9ï¼‘ï¼’ï¼“ï¼”ï¼•ï¼–ï¼—ï¼˜ï¼™ï¼123456789]{1,2})\s*[rRãƒ¬ãƒ¼ã‚¹]$/);
                if (raceMatch) {
                    const raceNum = raceMatch[1]
                        .replace(/[ï¼ï¼‘ï¼’ï¼“ï¼”ï¼•ï¼–ï¼—ï¼˜ï¼™]/g, (match) =>
                            String.fromCharCode(match.charCodeAt(0) - 0xFF10 + 0x30));

                    currentRace = parseInt(raceNum);
                    currentType = null; // æ–°ã—ã„ãƒ¬ãƒ¼ã‚¹ã§å€™è£œé¦¬ã‚¿ã‚¤ãƒ—ã‚’ãƒªã‚»ãƒƒãƒˆ
                    raceData[currentRace] = {
                        horses: [],
                        strategies: {},
                        candidates: { renka: [], osae: [] }
                    };
                    console.log(`ğŸ¯ ${currentRace}R é–‹å§‹`);
                    continue;
                }

                if (!currentRace) continue;

                // é¦¬æƒ…å ±ã®è§£æï¼ˆæœ¬å‘½ãƒ»å¯¾æŠ—ãƒ»å˜ç©´ï¼‰
                const horseMatch = line.match(/^([â—â—‹â–²â–³Ã—])\s*([0-9]+)\s+([^\s]+)(?:\s+(æœ¬å‘½|å¯¾æŠ—|å˜ç©´|é€£ä¸‹|æŠ¼ã•ãˆ))?/);
                if (horseMatch) {
                    currentType = null; // é€šå¸¸ã®é¦¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«å…¥ã£ãŸã‚‰å€™è£œé¦¬ã‚¿ã‚¤ãƒ—ã‚’ãƒªã‚»ãƒƒãƒˆ
                    const [, mark, number, name, type] = horseMatch;

                    // ç¨®åˆ¥è‡ªå‹•åˆ¤å®š
                    let horseType = type;
                    if (!type) {
                        if (mark === 'â—') horseType = 'æœ¬å‘½';
                        else if (mark === 'â—‹') horseType = 'å¯¾æŠ—';
                        else if (mark === 'â–²') horseType = 'å˜ç©´';
                        else if (mark === 'â–³') horseType = 'é€£ä¸‹';
                        else if (mark === 'Ã—') horseType = 'æŠ¼ã•ãˆ';
                        else horseType = 'ãã®ä»–';
                    }

                    // ã‚¹ã‚³ã‚¢æŠ½å‡º
                    const scoreMatch = line.match(/ç´¯ç©ã‚¹ã‚³ã‚¢:?\s*([0-9]+)pt/);
                    const score = scoreMatch ? scoreMatch[1] : '62';

                    // æ˜Ÿè©•ä¾¡æŠ½å‡º
                    const starMatch = line.match(/ç·åˆè©•ä¾¡:(â˜…+)/);
                    const stars = starMatch ? starMatch[1] : 'â˜…â˜…â˜…';

                    // ç‰¹å¾´é‡é‡è¦åº¦æŠ½å‡º
                    const stabilityMatch = line.match(/å®‰å®šæ€§([0-9]+)%/);
                    const abilityMatch = line.match(/èƒ½åŠ›ä¸Šä½æ€§([0-9]+)%/);
                    const developmentMatch = line.match(/å±•é–‹åˆ©([0-9]+)%/);

                    const horseData = {
                        number: parseInt(number),
                        name: name,
                        mark: mark,
                        type: horseType,
                        score: score,
                        stars: stars,
                        stability: stabilityMatch ? stabilityMatch[1] : '70',
                        ability: abilityMatch ? abilityMatch[1] : '68',
                        development: developmentMatch ? developmentMatch[1] : '65'
                    };

                    raceData[currentRace].horses.push(horseData);
                    console.log(`ğŸ é¦¬ãƒ‡ãƒ¼ã‚¿è¿½åŠ : ${mark}${number}${name} (${horseType}) ${score}pt`);
                    continue;
                }

                // é€£ä¸‹å€™è£œé¦¬ã®è§£æï¼ˆ1è¡Œå½¢å¼ + ãƒ˜ãƒƒãƒ€ãƒ¼å½¢å¼ä¸¡å¯¾å¿œï¼‰
                if (line.includes('é€£ä¸‹å€™è£œé¦¬')) {
                    console.log(`ğŸ” é€£ä¸‹å€™è£œé¦¬è¡Œæ¤œå‡º: "${line}"`);

                    // 1è¡Œå½¢å¼ã®å ´åˆï¼ˆ1Rå½¢å¼ï¼‰: â–³ é€£ä¸‹å€™è£œé¦¬ 4 ãƒ™ãƒƒãƒ†ã‚£ãƒ¼ãƒŠ (75pt) 13 ãƒ–ãƒƒã‚³ãƒ¯ãƒ¼ã‚¹ (75pt)
                    if (line.includes('â–³') && /[0-9]+/.test(line)) {
                        console.log(`ğŸ“ 1è¡Œå½¢å¼ã®é€£ä¸‹å€™è£œé¦¬å‡¦ç†: "${line}"`);
                        const parts = line.split(/\s+/);
                        let i = 0;
                        while (i < parts.length) {
                            const part = parts[i];
                            if (/^[0-9]+$/.test(part)) {
                                const number = parseInt(part);
                                let name = '';
                                let score = '66';

                                if (i + 1 < parts.length && !/^[0-9]+$/.test(parts[i + 1]) && !parts[i + 1].includes('pt')) {
                                    name = parts[i + 1];
                                    i++;
                                } else {
                                    name = `é€£ä¸‹${number}`;
                                }

                                if (i + 1 < parts.length && parts[i + 1].includes('pt')) {
                                    const scoreMatch = parts[i + 1].match(/([0-9]+)pt/);
                                    if (scoreMatch) score = scoreMatch[1];
                                    i++;
                                }

                                const horseData = {
                                    number: number,
                                    name: name,
                                    mark: 'â–³',
                                    type: 'é€£ä¸‹',
                                    score: score,
                                    stars: 'â˜…â˜…â˜…',
                                    stability: '70',
                                    ability: '68',
                                    development: '65'
                                };
                                raceData[currentRace].horses.push(horseData);
                                console.log(`ğŸ é€£ä¸‹å€™è£œé¦¬è¿½åŠ ï¼ˆ1è¡Œå½¢å¼ï¼‰: â–³${number} ${name} (${score}pt)`);
                            }
                            i++;
                        }
                    } else {
                        // ãƒ˜ãƒƒãƒ€ãƒ¼å½¢å¼ã®å ´åˆï¼ˆ2Rä»¥é™å½¢å¼ï¼‰: â–³ é€£ä¸‹å€™è£œé¦¬
                        console.log(`ğŸ“ ãƒ˜ãƒƒãƒ€ãƒ¼å½¢å¼ã®é€£ä¸‹å€™è£œé¦¬å‡¦ç†`);
                        currentType = 'é€£ä¸‹';
                    }
                    continue;
                }

                // é€£ä¸‹å€™è£œé¦¬ãƒ‡ãƒ¼ã‚¿è¡Œå‡¦ç†ï¼ˆæ”¹è¡Œåˆ†ã‹ã‚Œå¯¾å¿œï¼‰
                if (currentType === 'é€£ä¸‹' && /^[0-9]+\s+/.test(line)) {
                    console.log(`ğŸ é€£ä¸‹å€™è£œé¦¬ãƒ‡ãƒ¼ã‚¿è¡Œ: "${line}"`);

                    const parts = line.split(/\s+/);
                    if (parts.length >= 2) {
                        const number = parseInt(parts[0]);
                        let name = parts[1];
                        let score = '66';

                        // ã‚¹ã‚³ã‚¢æŠ½å‡º
                        const scoreMatch = line.match(/\(([0-9]+)pt\)/);
                        if (scoreMatch) {
                            score = scoreMatch[1];
                        }

                        const horseData = {
                            number: number,
                            name: name,
                            mark: 'â–³',
                            type: 'é€£ä¸‹',
                            score: score,
                            stars: 'â˜…â˜…â˜…',
                            stability: '70',
                            ability: '68',
                            development: '65'
                        };
                        raceData[currentRace].horses.push(horseData);
                        console.log(`ğŸ é€£ä¸‹å€™è£œé¦¬è¿½åŠ : â–³${number} ${name} (${score}pt)`);
                    }
                    continue;
                }

                // æŠ¼ã•ãˆå€™è£œé¦¬ã®è§£æï¼ˆ1è¡Œå½¢å¼ + ãƒ˜ãƒƒãƒ€ãƒ¼å½¢å¼ä¸¡å¯¾å¿œï¼‰
                if (line.includes('æŠ‘ãˆå€™è£œé¦¬')) {
                    console.log(`ğŸ” æŠ¼ã•ãˆå€™è£œé¦¬è¡Œæ¤œå‡º: "${line}"`);

                    // 1è¡Œå½¢å¼ã®å ´åˆï¼ˆ1Rå½¢å¼ï¼‰: Ã— æŠ‘ãˆå€™è£œé¦¬ 2 ãƒ¬ãƒ‡ã‚£ãƒ´ã‚£ã‚¯ãƒˆãƒªã‚¢ (66pt) 7 ã‚ªãƒ‹ã‚¯ãƒ€ã‚¤ã‚¹ã‚­ãƒãƒ³ (66pt)
                    if (line.includes('Ã—') && /[0-9]+/.test(line)) {
                        console.log(`ğŸ“ 1è¡Œå½¢å¼ã®æŠ¼ã•ãˆå€™è£œé¦¬å‡¦ç†: "${line}"`);
                        const parts = line.split(/\s+/);
                        let i = 0;
                        while (i < parts.length) {
                            const part = parts[i];
                            if (/^[0-9]+$/.test(part)) {
                                const number = parseInt(part);
                                let name = '';
                                let score = '62';

                                if (i + 1 < parts.length && !/^[0-9]+$/.test(parts[i + 1]) && !parts[i + 1].includes('pt')) {
                                    name = parts[i + 1];
                                    i++;
                                } else {
                                    name = `æŠ¼ã•ãˆ${number}`;
                                }

                                if (i + 1 < parts.length && parts[i + 1].includes('pt')) {
                                    const scoreMatch = parts[i + 1].match(/([0-9]+)pt/);
                                    if (scoreMatch) score = scoreMatch[1];
                                    i++;
                                }

                                const horseData = {
                                    number: number,
                                    name: name,
                                    mark: 'Ã—',
                                    type: 'æŠ¼ã•ãˆ',
                                    score: score,
                                    stars: 'â˜…â˜…â˜…',
                                    stability: '62',
                                    ability: '60',
                                    development: '58'
                                };
                                raceData[currentRace].horses.push(horseData);
                                console.log(`ğŸ æŠ¼ã•ãˆå€™è£œé¦¬è¿½åŠ ï¼ˆ1è¡Œå½¢å¼ï¼‰: Ã—${number} ${name} (${score}pt)`);
                            }
                            i++;
                        }
                    } else {
                        // ãƒ˜ãƒƒãƒ€ãƒ¼å½¢å¼ã®å ´åˆï¼ˆ2Rä»¥é™å½¢å¼ï¼‰: Ã— æŠ‘ãˆå€™è£œé¦¬
                        console.log(`ğŸ“ ãƒ˜ãƒƒãƒ€ãƒ¼å½¢å¼ã®æŠ¼ã•ãˆå€™è£œé¦¬å‡¦ç†`);
                        currentType = 'æŠ¼ã•ãˆ';
                    }
                    continue;
                }

                // æŠ¼ã•ãˆå€™è£œé¦¬ãƒ‡ãƒ¼ã‚¿è¡Œå‡¦ç†ï¼ˆæ”¹è¡Œåˆ†ã‹ã‚Œå¯¾å¿œï¼‰
                if (currentType === 'æŠ¼ã•ãˆ' && /^[0-9]+\s+/.test(line)) {
                    console.log(`ğŸ æŠ¼ã•ãˆå€™è£œé¦¬ãƒ‡ãƒ¼ã‚¿è¡Œ: "${line}"`);

                    const parts = line.split(/\s+/);
                    if (parts.length >= 2) {
                        const number = parseInt(parts[0]);
                        let name = parts[1];
                        let score = '62';

                        // ã‚¹ã‚³ã‚¢æŠ½å‡º
                        const scoreMatch = line.match(/\(([0-9]+)pt\)/);
                        if (scoreMatch) {
                            score = scoreMatch[1];
                        }

                        const horseData = {
                            number: number,
                            name: name,
                            mark: 'Ã—',
                            type: 'æŠ¼ã•ãˆ',
                            score: score,
                            stars: 'â˜…â˜…â˜…',
                            stability: '62',
                            ability: '60',
                            development: '58'
                        };
                        raceData[currentRace].horses.push(horseData);
                        console.log(`ğŸ æŠ¼ã•ãˆå€™è£œé¦¬è¿½åŠ : Ã—${number} ${name} (${score}pt)`);
                    }
                    continue;
                }

                // æˆ¦ç•¥è§£æï¼ˆæ”¹è‰¯ç‰ˆï¼‰
                if (line.includes('å°‘ç‚¹æ•°çš„ä¸­å‹ãƒ¢ãƒ‡ãƒ«') || line.includes('ãƒãƒ©ãƒ³ã‚¹å‹ãƒ¢ãƒ‡ãƒ«') || line.includes('é«˜é…å½“è¿½æ±‚å‹ãƒ¢ãƒ‡ãƒ«')) {
                    currentType = null; // æˆ¦ç•¥ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«å…¥ã£ãŸã‚‰å€™è£œé¦¬ã‚¿ã‚¤ãƒ—ã‚’ãƒªã‚»ãƒƒãƒˆ
                    console.log(`ğŸ¯ æˆ¦ç•¥è¡Œæ¤œå‡º: "${line}"`);

                    // AIäºˆæ¸¬ç‡æŠ½å‡ºï¼ˆæ§˜ã€…ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¯¾å¿œï¼‰
                    const aiMatch = line.match(/AI[\s]*[äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«]*[\s:]*[çš„ä¸­ç‡]*[\s]*(\d+)%/) ||
                                   line.match(/(\d+)%/);
                    const hitRate = aiMatch ? aiMatch[1] : "50";

                    // è²·ã„ç›®æŠ½å‡ºï¼ˆæ”¹è‰¯ç‰ˆï¼‰
                    let betText = "";
                    if (line.includes('é¦¬å˜')) {
                        const betMatch = line.match(/é¦¬å˜\s*([^A-Z]+?)(?:\s*AI|$)/);
                        betText = betMatch ? `é¦¬å˜ ${betMatch[1].trim()}` : "æœªè¨­å®š";
                    } else {
                        betText = "æœªè¨­å®š";
                    }

                    if (line.includes('å°‘ç‚¹æ•°çš„ä¸­å‹ãƒ¢ãƒ‡ãƒ«')) {
                        raceData[currentRace].strategies.safe = {
                            title: "ğŸ¯ å°‘ç‚¹æ•°çš„ä¸­å‹ãƒ¢ãƒ‡ãƒ«",
                            hitRate: hitRate,
                            bets: [betText]
                        };
                        console.log(`âœ… å°‘ç‚¹æ•°å‹æˆ¦ç•¥ç™»éŒ²: ${betText}, AIäºˆæ¸¬: ${hitRate}%`);
                    } else if (line.includes('ãƒãƒ©ãƒ³ã‚¹å‹ãƒ¢ãƒ‡ãƒ«')) {
                        raceData[currentRace].strategies.balance = {
                            title: "âš–ï¸ ãƒãƒ©ãƒ³ã‚¹å‹ãƒ¢ãƒ‡ãƒ«",
                            hitRate: hitRate,
                            bets: [betText]
                        };
                        console.log(`âœ… ãƒãƒ©ãƒ³ã‚¹å‹æˆ¦ç•¥ç™»éŒ²: ${betText}, AIäºˆæ¸¬: ${hitRate}%`);
                    } else if (line.includes('é«˜é…å½“è¿½æ±‚å‹ãƒ¢ãƒ‡ãƒ«')) {
                        raceData[currentRace].strategies.aggressive = {
                            title: "ğŸš€ é«˜é…å½“è¿½æ±‚å‹ãƒ¢ãƒ‡ãƒ«",
                            hitRate: hitRate,
                            bets: [betText]
                        };
                        console.log(`âœ… é«˜é…å½“å‹æˆ¦ç•¥ç™»éŒ²: ${betText}, AIäºˆæ¸¬: ${hitRate}%`);
                    }
                }
            }

            // å„ãƒ¬ãƒ¼ã‚¹ã®é¦¬ã‚’é‡è¦åº¦é †ã§ã‚½ãƒ¼ãƒˆ
            for (const [raceNum, raceInfo] of Object.entries(raceData)) {
                const typeOrder = { 'æœ¬å‘½': 1, 'å¯¾æŠ—': 2, 'å˜ç©´': 3, 'é€£ä¸‹': 4, 'æŠ¼ã•ãˆ': 5, 'ãã®ä»–': 6 };
                raceInfo.horses.sort((a, b) => {
                    const orderA = typeOrder[a.type] || 9;
                    const orderB = typeOrder[b.type] || 9;
                    if (orderA !== orderB) return orderA - orderB;
                    return a.number - b.number; // åŒã˜ç¨®åˆ¥å†…ã§ã¯é¦¬ç•ªé †
                });
                console.log(`ğŸ ${raceNum}R: ${raceInfo.horses.length}é ­ã‚’é‡è¦åº¦é †ã§ã‚½ãƒ¼ãƒˆ`);
            }

            console.log('ğŸ“Š Simpleç‰ˆè§£æå®Œäº†:', raceData);
            return raceData;
        }

        // Simpleç‰ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
        function displaySimplePreview(data) {
            const previewContent = document.getElementById('simple-preview-content');
            let html = '<div class="race-grid">';

            console.log('ğŸ” Simpleç‰ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºé–‹å§‹:', data);

            for (let raceNum = 1; raceNum <= 12; raceNum++) {
                const raceInfo = data[raceNum];
                if (!raceInfo || !raceInfo.horses.length) continue;

                console.log(`ğŸ“‹ ${raceNum}R ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ä½œæˆ: ${raceInfo.horses.length}é ­`);

                html += `
                    <div class="race-preview">
                        <h3>${raceNum}R</h3>

                        <div class="horse-section">
                            <h4>ğŸ é¦¬æƒ…å ±ï¼ˆ${raceInfo.horses.length}é ­ï¼‰</h4>
                            <div class="horse-list">`;

                raceInfo.horses.forEach(horse => {
                    // ç‰¹å¾´é‡é‡è¦åº¦ã‚’æ¡ä»¶ä»˜ãã§è¡¨ç¤ºï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®å ´åˆã¯éè¡¨ç¤ºï¼‰
                    let importanceText = '';
                    if (horse.stability !== '70' && horse.stability !== '62' ||
                        horse.ability !== '68' && horse.ability !== '60' ||
                        horse.development !== '65' && horse.development !== '58') {
                        // å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã®ã¿è¡¨ç¤º
                        importanceText = `<span class="importance">å®‰å®šæ€§${horse.stability}% èƒ½åŠ›ä¸Šä½æ€§${horse.ability}% å±•é–‹åˆ©${horse.development}%</span>`;
                    }

                    html += `
                        <div class="horse-item">
                            <span class="horse-mark">${horse.mark}</span>
                            <span class="horse-info">${horse.number}ç•ª ${horse.name} (${horse.type})</span>
                            <div class="horse-details">
                                <span class="factor">${horse.stars} ç´¯ç©ã‚¹ã‚³ã‚¢: ${horse.score}pt</span>
                                ${importanceText}
                            </div>
                        </div>`;
                });

                html += `
                            </div>
                        </div>

                        <div class="strategy-preview">
                            <div class="strategy-item">
                                <h4>ğŸ¯ å°‘ç‚¹æ•°çš„ä¸­å‹</h4>
                                <div>${raceInfo.strategies.safe ? `${raceInfo.strategies.safe.bets.join('<br>')} AIäºˆæ¸¬: ${raceInfo.strategies.safe.hitRate}%` : 'æœªè¨­å®š'}</div>
                            </div>
                            <div class="strategy-item">
                                <h4>âš–ï¸ ãƒãƒ©ãƒ³ã‚¹å‹</h4>
                                <div>${raceInfo.strategies.balance ? `${raceInfo.strategies.balance.bets.join('<br>')} AIäºˆæ¸¬: ${raceInfo.strategies.balance.hitRate}%` : 'æœªè¨­å®š'}</div>
                            </div>
                            <div class="strategy-item">
                                <h4>ğŸš€ é«˜é…å½“è¿½æ±‚å‹</h4>
                                <div>${raceInfo.strategies.aggressive ? `${raceInfo.strategies.aggressive.bets.join('<br>')} AIäºˆæ¸¬: ${raceInfo.strategies.aggressive.hitRate}%` : 'æœªè¨­å®š'}</div>
                            </div>
                        </div>
                    </div>
                `;
            }

            html += '</div>';
            previewContent.innerHTML = html;
        }

        // JSONæ›´æ–°å‡¦ç†ï¼ˆSimpleç‰ˆï¼‰
        document.getElementById('simple-update-json-btn').addEventListener('click', function() {
            if (!simpleParsedData) {
                alert('å…ˆã«è§£æã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„');
                return;
            }

            // å®Ÿéš›ã®JSONæ›´æ–°å‡¦ç†ã‚’ã“ã“ã«å®Ÿè£…
            console.log('Simpleç‰ˆJSONæ›´æ–°:', simpleParsedData);
            document.getElementById('simple-success-section').style.display = 'block';
            document.getElementById('simple-check-result-btn').style.display = 'inline-block';
        });
    </script>

    <style>
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .ai-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        .pulse {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        h1 {
            color: #3b82f6;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #64748b;
            font-size: 1.1rem;
        }

        .guarantee-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fbbf24 10%, #fef3c7 100%);
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 20px;
            margin: 30px auto;
            max-width: 600px;
            text-align: left;
        }

        .guarantee-box h3 {
            color: #92400e;
            margin-bottom: 15px;
            text-align: center;
        }

        .guarantee-box ul {
            list-style: none;
            padding: 0;
        }

        .guarantee-box li {
            margin: 8px 0;
            font-weight: 500;
        }

        .form-section {
            background: #1e293b;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .input-section h2 {
            color: #3b82f6;
            margin-bottom: 15px;
        }

        .format-guide {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .format-guide p {
            margin: 5px 0;
            color: #94a3b8;
        }

        #simple-data {
            width: 100%;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 15px;
            color: #e2e8f0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            resize: vertical;
        }

        #simple-data::placeholder {
            color: #64748b;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn-success:hover {
            transform: translateY(-2px);
        }

        .btn-check {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: transform 0.2s;
            display: inline-block;
        }

        .btn-check:hover {
            transform: translateY(-2px);
        }

        .preview-section, .success-section {
            background: #1e293b;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }

        .preview-section h2, .success-section h2 {
            color: #3b82f6;
            margin-bottom: 20px;
        }

        .race-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .race-preview {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 10px;
            padding: 20px;
        }

        .race-preview h3 {
            color: #f59e0b;
            margin-bottom: 15px;
            text-align: center;
        }

        .horse-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #1e293b;
            border-radius: 8px;
        }

        .horse-section h4 {
            color: #3b82f6;
            margin-bottom: 10px;
        }

        .horse-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .horse-item {
            padding: 12px;
            background: #0f172a;
            border-radius: 6px;
            border-left: 3px solid #3b82f6;
        }

        .horse-mark {
            font-weight: bold;
            font-size: 1.2rem;
            margin-right: 8px;
            color: #fbbf24;
        }

        .horse-info {
            font-weight: 600;
            color: #e2e8f0;
            margin-right: 12px;
        }

        .horse-details {
            margin-top: 6px;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .factor {
            font-size: 0.85rem;
            color: #94a3b8;
        }

        .importance {
            font-size: 0.8rem;
            color: #6b7280;
            font-style: italic;
        }

        .strategy-item {
            margin-bottom: 15px;
            padding: 10px;
            background: #1e293b;
            border-radius: 8px;
        }

        .strategy-item h4 {
            margin: 0 0 8px 0;
            font-size: 0.9rem;
        }

        .strategy-item div {
            color: #e2e8f0;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .success-section {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            text-align: center;
        }

        .success-section h2 {
            color: white;
        }
    </style>
</BaseLayout>