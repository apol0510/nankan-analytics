---
export const prerender = true;
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout title="è²·ã„ç›®ç›´æ¥å…¥åŠ›ã‚·ã‚¹ãƒ†ãƒ ï¼ˆSuper Simpleç‰ˆï¼‰" description="æ ¹æœ¬è§£æ±ºç‰ˆ">
    <div class="container">
        <div class="header-section">
            <div class="ai-badge">
                <span class="pulse"></span>
                <span class="ai-status">Super Simpleç‰ˆ - æ ¹æœ¬è§£æ±º</span>
            </div>
            <h1>ğŸ¯ è²·ã„ç›®ç›´æ¥å…¥åŠ›ã‚·ã‚¹ãƒ†ãƒ ï¼ˆSuper Simpleç‰ˆï¼‰</h1>
            <p class="subtitle">æ ¹æœ¬ã‹ã‚‰æ–°ã—ãè¨­è¨ˆã—ãŸç¢ºå®Ÿå‹•ä½œç‰ˆ</p>
            <div class="guarantee-box">
                <h3>ğŸ’– Super Simpleç‰ˆã®ç‰¹å¾´</h3>
                <ul>
                    <li>âœ… <strong>æ ¹æœ¬è§£æ±º</strong>: è¤‡é›‘ãƒ­ã‚¸ãƒƒã‚¯å®Œå…¨å‰Šé™¤</li>
                    <li>âœ… <strong>ç¢ºå®Ÿãƒ‘ãƒ¼ã‚¹</strong>: ã‚·ãƒ³ãƒ—ãƒ«ãªæ–‡å­—åˆ—å‡¦ç†ã®ã¿</li>
                    <li>âœ… <strong>æ­£ç¢ºè¡¨ç¤º</strong>: è²·ã„ç›®ãƒ»AIäºˆæ¸¬ãƒ»æ˜Ÿè©•ä¾¡ã™ã¹ã¦æ­£å¸¸</li>
                    <li>âœ… <strong>ä¿å®ˆæ€§</strong>: ç†è§£ã—ã‚„ã™ãä¿®æ­£ã—ã‚„ã™ã„è¨­è¨ˆ</li>
                </ul>
            </div>
        </div>

        <div class="form-section">
            <div class="input-section">
                <h2>ğŸ“ ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ï¼ˆSuper Simpleå½¢å¼ï¼‰</h2>
                <div class="format-guide">
                    <p><strong>ã‚·ãƒ³ãƒ—ãƒ«å½¢å¼:</strong> 1è¡Œ1é¦¬ã€æˆ¦ç•¥åˆ¥è²·ã„ç›®ã‚’æ˜ç¢ºã«åˆ†é›¢</p>
                    <div class="example-format">
                        <strong>å…¥åŠ›ä¾‹:</strong><br>
                        11R æ±äº¬è¨˜å¿µ ãƒ€2,400m (14é ­) ç™ºèµ°æ™‚åˆ»20:10<br>
                        <br>
                        â— 13 ãƒ“ãƒªãƒ¼ãƒ´ãƒ›ãƒ¼ã‚¹ æœ¬å‘½<br>
                        ç·åˆè©•ä¾¡:â˜…â˜…â˜…<br>
                        ç´¯ç©ã‚¹ã‚³ã‚¢: 79pt<br>
                        ç‰¹å¾´é‡é‡è¦åº¦<br>
                        å®‰å®šæ€§89%<br>
                        èƒ½åŠ›ä¸Šä½æ€§83%<br>
                        å±•é–‹åˆ©74%<br>
                        <br>
                        â—‹ 12 ã‚µã‚¦ãƒ³ãƒ‰ã‚­ãƒ³ã‚°ãƒ€ãƒ  å¯¾æŠ—<br>
                        ç·åˆè©•ä¾¡:â˜…â˜…â˜…<br>
                        ç´¯ç©ã‚¹ã‚³ã‚¢: 79pt<br>
                        ç‰¹å¾´é‡é‡è¦åº¦<br>
                        å®‰å®šæ€§88%<br>
                        èƒ½åŠ›ä¸Šä½æ€§84%<br>
                        å±•é–‹åˆ©73%<br>
                        <br>
                        â–² 11 ãƒ•ã‚©ãƒ¼ãƒ¢ã‚µãƒ«ãƒ“ãƒ¼ å˜ç©´<br>
                        ç·åˆè©•ä¾¡:â˜…â˜…â˜…<br>
                        ç´¯ç©ã‚¹ã‚³ã‚¢: 78pt<br>
                        <br>
                        â–² 3 ã‚¢ãƒˆãƒ©ã‚¹ãƒ©ã‚¤ã‚º å˜ç©´<br>
                        ç·åˆè©•ä¾¡:â˜…â˜…â˜…<br>
                        ç´¯ç©ã‚¹ã‚³ã‚¢: 77pt<br>
                        <br>
                        â–³ é€£ä¸‹å€™è£œé¦¬<br>
                        2 ã‚«ãƒ´ã‚¡ã‚¹ (75pt)<br>
                        1 ã‚«ã‚ºãƒãƒŸã‚«ãƒ…ã‚­ (71pt)<br>
                        8 ãƒªãƒ¥ã‚¦ãƒ¯ãƒ³ã‚«ãƒã‚¢ (71pt)<br>
                        9 ã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ« (74pt)<br>
                        <br>
                        Ã— æŠ‘ãˆå€™è£œé¦¬<br>
                        5 ã‚¢ãƒ€ãƒ©ã‚ºãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ (71pt)<br>
                        6 ãƒŠãƒƒã‚¯ã‚¢ãƒ†ãƒŠ (70pt)<br>
                        7 ãƒãƒ«ãƒ¨ã‚¸ãƒ§ãƒ¼ãƒ€ãƒ³ (67pt)<br>
                        <br>
                        å°‘ç‚¹æ•°çš„ä¸­å‹ãƒ¢ãƒ‡ãƒ«<br>
                        é¦¬å˜ 13 â†’ 3,11,12ã€€3ç‚¹<br>
                        AIäºˆæ¸¬49%<br>
                        <br>
                        ãƒãƒ©ãƒ³ã‚¹å‹ãƒ¢ãƒ‡ãƒ«<br>
                        é¦¬å˜ 3,11,12 â†’ 13ã€€3ç‚¹<br>
                        é¦¬å˜ 13 â‡” 1,2,8,9ã€€8ç‚¹<br>
                        é¦¬å˜ 12 â†’ 3,11ã€€2ç‚¹<br>
                        AIäºˆæ¸¬59%<br>
                        <br>
                        é«˜é…å½“è¿½æ±‚å‹ãƒ¢ãƒ‡ãƒ«<br>
                        é¦¬å˜ 13 â†’ 5,6,7ã€€3ç‚¹<br>
                        é¦¬å˜ 12 â‡” 1,2,3,5,6,7,8,9,11ã€€18ç‚¹<br>
                        AIäºˆæ¸¬34%<br>
                    </div>
                </div>
                <textarea
                    id="super-simple-data"
                    placeholder="Super Simpleå½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."
                    rows="25"></textarea>
            </div>

            <div class="action-buttons">
                <button type="button" id="super-simple-parse-btn" class="btn-primary">ğŸ“‹ è§£æãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
                <button type="button" id="super-simple-update-json-btn" class="btn-success" style="display: none;">ğŸš€ JSONæ›´æ–°å®Ÿè¡Œ</button>
                <a href="/premium-predictions" id="super-simple-check-result-btn" class="btn-check" style="display: none;">ğŸ‘€ çµæœç¢ºèª</a>
            </div>
        </div>

        <div id="super-simple-preview-section" class="preview-section" style="display: none;">
            <h2>ğŸ“‹ è§£æçµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆSuper Simpleç‰ˆï¼‰</h2>
            <div id="super-simple-preview-content"></div>
        </div>

        <div id="super-simple-success-section" class="success-section" style="display: none;">
            <h2>âœ… æ›´æ–°å®Œäº†</h2>
            <p>å…¨ãƒ‡ãƒ¼ã‚¿ãŒæ­£å¸¸ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸï¼</p>
            <p><strong>premium-predictions/</strong> ã§çµæœã‚’ã”ç¢ºèªãã ã•ã„ã€‚</p>
        </div>
    </div>

    <script type="text/javascript">
        let superSimpleParsedData = null;

        // è²·ã„ç›®ç‚¹æ•°è‡ªå‹•è¨ˆç®—é–¢æ•°ï¼ˆãƒã‚°é˜²æ­¢ç”¨ï¼‰
        function calculateBetPoints(betStr) {
            if (!betStr || typeof betStr !== 'string') return 1;

            // æ—¢ã«ç‚¹æ•°ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯é™¤å»
            const cleanBet = betStr.replace(/\s*\d+ç‚¹\s*$/, '').trim();

            if (cleanBet.includes('â‡”')) {
                // åŒæ–¹å‘ã®å ´åˆ: è»¸é¦¬ã¨ç›¸æ‰‹é¦¬ã®çµ„ã¿åˆã‚ã› Ã— 2
                const parts = cleanBet.split('â‡”');
                if (parts.length !== 2) return 1;

                const leftHorses = parts[0].replace(/é¦¬å˜/g, '').trim().split(',').filter(h => h.trim());
                const rightHorses = parts[1].trim().split(/[,ã€]/).filter(h => h.trim());

                // å·¦å´ã®é¦¬æ•° Ã— å³å´ã®é¦¬æ•° Ã— 2ï¼ˆåŒæ–¹å‘ï¼‰
                const points = leftHorses.length * rightHorses.length * 2;
                console.log(`â‡” è¨ˆç®—: ${leftHorses.length}é ­ Ã— ${rightHorses.length}é ­ Ã— 2 = ${points}ç‚¹`);
                return points;
            } else if (cleanBet.includes('â†’')) {
                // å˜æ–¹å‘ã®å ´åˆ: è»¸é¦¬ã‹ã‚‰ç›¸æ‰‹é¦¬ã¸ã®çµ„ã¿åˆã‚ã›
                const parts = cleanBet.split('â†’');
                if (parts.length !== 2) return 1;

                const leftHorses = parts[0].replace(/é¦¬å˜/g, '').trim().split(',').filter(h => h.trim());
                const rightHorses = parts[1].trim().split(/[,ã€]/).filter(h => h.trim());

                // å·¦å´ã®é¦¬æ•° Ã— å³å´ã®é¦¬æ•°
                const points = leftHorses.length * rightHorses.length;
                console.log(`â†’ è¨ˆç®—: ${leftHorses.length}é ­ Ã— ${rightHorses.length}é ­ = ${points}ç‚¹`);
                return points;
            }

            return 1; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
        }

        // è²·ã„ç›®æ–‡å­—åˆ—ã«æ­£ã—ã„ç‚¹æ•°ã‚’è¿½åŠ ã™ã‚‹
        function addPointsToBet(betStr) {
            if (!betStr || typeof betStr !== 'string') return betStr;

            // æ—¢å­˜ã®ç‚¹æ•°è¡¨è¨˜ã‚’å‰Šé™¤
            const cleanBet = betStr.replace(/\s*\d+ç‚¹\s*$/, '').trim();

            // æ­£ã—ã„ç‚¹æ•°ã‚’è¨ˆç®—
            const points = calculateBetPoints(cleanBet);

            // ç‚¹æ•°ã‚’è¿½åŠ ã—ã¦è¿”ã™
            return `${cleanBet}ã€€${points}ç‚¹`;
        }

        // DOMContentLoadedã‚¤ãƒ™ãƒ³ãƒˆã§JavaScriptåˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ Super Simpleç‰ˆJavaScriptåˆæœŸåŒ–å®Œäº†');

            // Super Simpleç‰ˆè§£æå‡¦ç†
            const parseBtn = document.getElementById('super-simple-parse-btn');
            if (parseBtn) {
                console.log('âœ… ãƒ‘ãƒ¼ã‚¹ãƒœã‚¿ãƒ³ç™ºè¦‹');
                parseBtn.addEventListener('click', function(event) {
                    console.log('ğŸ¯ ãƒ‘ãƒ¼ã‚¹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ¤œå‡º');
                    event.preventDefault();

                    // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ„Ÿã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¤ºã™
                    parseBtn.style.transform = 'translateY(2px)';
                    setTimeout(() => {
                        parseBtn.style.transform = '';
                    }, 150);

                    executeParsing();
                });
            } else {
                console.error('âŒ ãƒ‘ãƒ¼ã‚¹ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }

            // JSONæ›´æ–°å‡¦ç†
            const updateBtn = document.getElementById('super-simple-update-json-btn');
            if (updateBtn) {
                updateBtn.addEventListener('click', function() {
                    executeJsonUpdate();
                });
            }
        });

        // è§£æå®Ÿè¡Œé–¢æ•°
        function executeParsing() {
            const inputData = document.getElementById('super-simple-data').value;

            if (!inputData.trim()) {
                alert('ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            try {
                console.log('ğŸ” å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ç¢ºèª:', inputData.substring(0, 200) + '...');
                superSimpleParsedData = parseSuperSimpleData(inputData);
                console.log('âœ… ãƒ‘ãƒ¼ã‚¹çµæœ:', superSimpleParsedData);
                console.log('ğŸ“Š æ¤œå‡ºã•ã‚ŒãŸãƒ¬ãƒ¼ã‚¹æ•°:', Object.keys(superSimpleParsedData).length);
                displaySuperSimplePreview(superSimpleParsedData);

                document.getElementById('super-simple-preview-section').style.display = 'block';
                document.getElementById('super-simple-update-json-btn').style.display = 'inline-block';
                document.getElementById('super-simple-check-result-btn').style.display = 'inline-block';
            } catch (error) {
                alert('ãƒ‡ãƒ¼ã‚¿ã®è§£æã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
                console.error('Super Simple Parse error:', error);
            }
        }

        // JSONæ›´æ–°å®Ÿè¡Œé–¢æ•°
        function executeJsonUpdate() {
            if (!superSimpleParsedData) {
                alert('å…ˆã«è§£æã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„');
                return;
            }

            console.log('ğŸš€ Super Simpleç‰ˆJSONç”Ÿæˆé–‹å§‹:', superSimpleParsedData);

            try {
                // allRacesPrediction.jsonå½¢å¼ã«å¤‰æ›
                const jsonOutput = generateAllRacesPredictionJson(superSimpleParsedData);

                // ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç”Ÿæˆï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãï¼‰
                const now = new Date();
                const timestamp = now.getFullYear() +
                    String(now.getMonth() + 1).padStart(2, '0') +
                    String(now.getDate()).padStart(2, '0') + '_' +
                    String(now.getHours()).padStart(2, '0') +
                    String(now.getMinutes()).padStart(2, '0') +
                    String(now.getSeconds()).padStart(2, '0');
                const fileName = `allRacesPrediction_${timestamp}.json`;

                // JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
                const blob = new Blob([JSON.stringify(jsonOutput, null, 2)], {
                    type: 'application/json'
                });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = fileName;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);

                console.log('âœ… JSONç”Ÿæˆãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Œäº†:', fileName);
                document.getElementById('super-simple-success-section').style.display = 'block';
                document.getElementById('super-simple-check-result-btn').style.display = 'inline-block';

                alert(`âœ… ${fileName}ã®ç”Ÿæˆãƒ»ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸï¼\n\nãƒ•ã‚¡ã‚¤ãƒ«ã‚’data/ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã ã•ã„ã€‚`);
            } catch (error) {
                console.error('âŒ JSONç”Ÿæˆã‚¨ãƒ©ãƒ¼:', error);
                alert('JSONç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
            }
        }

        // allRacesPrediction.jsonå½¢å¼ç”Ÿæˆé–¢æ•°ï¼ˆæ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ äº’æ›ç‰ˆï¼‰
        function generateAllRacesPredictionJson(raceData) {
            console.log('ğŸ“‹ æ—¢å­˜å½¢å¼JSONå¤‰æ›é–‹å§‹');

            // æ—¥ä»˜ã¨ç«¶é¦¬å ´ã‚’è§£æã•ã‚ŒãŸãƒ¬ãƒ¼ã‚¹æƒ…å ±ã‹ã‚‰å–å¾—
            let detectedDate = null;
            let detectedVenue = null; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯è¨­å®šã—ãªã„

            // æœ€åˆã®ãƒ¬ãƒ¼ã‚¹ã‹ã‚‰æ—¥ä»˜ã¨ç«¶é¦¬å ´ã‚’å–å¾—
            for (const [raceNum, raceInfo] of Object.entries(raceData)) {
                if (raceInfo.raceInfo) {
                    if (raceInfo.raceInfo.date && !detectedDate) {
                        detectedDate = raceInfo.raceInfo.date;
                    }
                    if (raceInfo.raceInfo.track) {
                        detectedVenue = raceInfo.raceInfo.track;
                        break; // æœ€åˆã®ãƒ¬ãƒ¼ã‚¹ã®ç«¶é¦¬å ´ã‚’ä½¿ç”¨
                    }
                }
            }

            // æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›ï¼ˆM/D â†’ YYYY-MM-DDï¼‰
            let formattedDate = new Date().toISOString().split('T')[0]; // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
            if (detectedDate) {
                const currentYear = new Date().getFullYear();
                const [month, day] = detectedDate.split('/').map(n => parseInt(n));
                if (month && day) {
                    formattedDate = `${currentYear}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    console.log(`ğŸ“… æ—¥ä»˜å¤‰æ›: ${detectedDate} â†’ ${formattedDate}`);
                }
            }

            // ç«¶é¦¬å ´ãŒæ¤œå‡ºã§ããªã‹ã£ãŸå ´åˆã®ã‚¨ãƒ©ãƒ¼å‡¦ç†
            if (!detectedVenue || detectedVenue === "æœªæŒ‡å®š") {
                console.error('âŒ ç«¶é¦¬å ´ãŒæ¤œå‡ºã§ãã¾ã›ã‚“ã§ã—ãŸ');
                alert('âš ï¸ ç«¶é¦¬å ´åãŒæ¤œå‡ºã§ãã¾ã›ã‚“ã§ã—ãŸã€‚å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã«ã€Œæµ¦å’Œã€ã€Œå¤§äº•ã€ã€Œå·å´ã€ã€Œèˆ¹æ©‹ã€ã®ã„ãšã‚Œã‹ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
                throw new Error('ç«¶é¦¬å ´åãŒæ¤œå‡ºã§ãã¾ã›ã‚“ã§ã—ãŸ');
            }

            console.log(`ğŸ æ¤œå‡ºã•ã‚ŒãŸæƒ…å ±: æ—¥ä»˜=${detectedDate}, ç«¶é¦¬å ´=${detectedVenue}`);

            // æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ äº’æ›å½¢å¼ã®JSONãƒ‡ãƒ¼ã‚¿æ§‹é€ 
            const jsonData = {
                raceDate: formattedDate,
                lastUpdated: new Date().toISOString(),
                track: detectedVenue,
                totalRaces: Object.keys(raceData).length,
                races: []
            };

            // å„ãƒ¬ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’æ—¢å­˜å½¢å¼ã«å¤‰æ›
            for (const [raceNum, raceInfo] of Object.entries(raceData)) {
                if (!raceInfo || !raceInfo.horses.length) continue;

                const raceNumber = parseInt(raceNum);

                // ãƒ¬ãƒ¼ã‚¹éšå±¤ã®åˆ¤å®š
                let tier = "premium";
                if (raceNumber >= Math.max(Object.keys(raceData).length - 2, 10)) {
                    if (raceNumber === Math.max(Object.keys(raceData).length - 1, 11)) {
                        tier = "free"; // ãƒ¡ã‚¤ãƒ³ãƒ¬ãƒ¼ã‚¹
                    } else {
                        tier = "standard";
                    }
                }

                // è§£æã•ã‚ŒãŸãƒ¬ãƒ¼ã‚¹æƒ…å ±ã‚’ä½¿ç”¨
                const parsedRaceInfo = raceInfo.raceInfo || {};
                const actualRaceName = parsedRaceInfo.raceName || `${String(raceNumber).padStart(2, '0')}R`;
                const actualDistance = parsedRaceInfo.distance || "1400m";
                const actualStartTime = parsedRaceInfo.startTime || "14:45";
                const actualHorseCount = parsedRaceInfo.horseCount || raceInfo.horses.length;
                const actualTrack = parsedRaceInfo.track || detectedVenue;

                const raceEntry = {
                    raceNumber: `${raceNum}R`,
                    raceName: actualRaceName,
                    tier: tier,
                    isMainRace: tier === "free",
                    displayOrder: raceNumber,
                    raceInfo: {
                        title: `${actualTrack.replace('ç«¶é¦¬', '')}${raceNum}R ${actualRaceName}`,
                        date: formattedDate,
                        track: actualTrack,
                        raceNumber: `${raceNum}R`,
                        raceName: actualRaceName,
                        abilityIndex: "85.0",
                        recommendation: "A+",
                        expectedReturn: "120",
                        distance: actualDistance,
                        horseCount: actualHorseCount,
                        startTime: actualStartTime,
                        raceCondition: parsedRaceInfo.raceCondition || "",
                        raceDetails: `${actualTrack}${raceNum}R ${actualDistance} ï¼ˆ${actualHorseCount}é ­ï¼‰ ç™ºèµ°æ™‚åˆ»${actualStartTime} ${actualRaceName}`
                    },
                    horses: {
                        main: convertHorseToExistingFormat(raceInfo.horses.find(h => h.type === 'æœ¬å‘½')),
                        sub: convertHorseToExistingFormat(raceInfo.horses.find(h => h.type === 'å¯¾æŠ—')),
                        // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: å˜ç©´2é ­ã‚’ç¢ºå®Ÿã«å–å¾—
                        hole1: convertHorseToExistingFormat(raceInfo.horses.filter(h => h.type === 'å˜ç©´')[0]),
                        hole2: convertHorseToExistingFormat(raceInfo.horses.filter(h => h.type === 'å˜ç©´')[1]),
                        // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: é€£ä¸‹ãƒ»æŠ¼ã•ãˆå€™è£œé¦¬ã‚’ç¢ºå®Ÿã«å–å¾—
                        connect: raceInfo.horses.filter(h => h.type === 'é€£ä¸‹').map(h => convertHorseToExistingFormat(h)),
                        reserve: raceInfo.horses.filter(h => h.type === 'æŠ¼ã•ãˆ').map(h => convertHorseToExistingFormat(h))
                    },
                    strategies: {
                        safe: raceInfo.strategies.safe ? {
                            title: raceInfo.strategies.safe.title || "ğŸ¯ å°‘ç‚¹æ•°çš„ä¸­å‹ãƒ¢ãƒ‡ãƒ«",
                            // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: è²·ã„ç›®ã‚’æ­£ã—ã„å½¢å¼ã§ä¿å­˜
                            bets: raceInfo.strategies.safe.bets.map(bet => {
                                const pointMatch = bet.match(/(\d+)ç‚¹/);
                                const points = pointMatch ? pointMatch[1] : "3";
                                // ç‚¹æ•°ã‚’å«ã‚ãŸæ­£ã—ã„å½¢å¼ã§ä¿å­˜
                                const betNumbers = bet.replace(/é¦¬å˜\s*/, '').trim();
                                return {
                                    type: 'é¦¬å˜',
                                    numbers: betNumbers,
                                    odds: '3-8å€'
                                };
                            }),
                            hitRate: raceInfo.strategies.safe.hitRate || "50",
                            confidence: parseInt(raceInfo.strategies.safe.hitRate || "50"),
                            risk: "ä½ãƒªã‚¹ã‚¯"
                        } : null,
                        balance: raceInfo.strategies.balance ? {
                            title: raceInfo.strategies.balance.title || "âš–ï¸ ãƒãƒ©ãƒ³ã‚¹å‹ãƒ¢ãƒ‡ãƒ«",
                            // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: è²·ã„ç›®ã‚’æ­£ã—ã„å½¢å¼ã§ä¿å­˜
                            bets: raceInfo.strategies.balance.bets.map(bet => {
                                const pointMatch = bet.match(/(\d+)ç‚¹/);
                                const points = pointMatch ? pointMatch[1] : "11";
                                // ç‚¹æ•°ã‚’å«ã‚ãŸæ­£ã—ã„å½¢å¼ã§ä¿å­˜
                                const betNumbers = bet.replace(/é¦¬å˜\s*/, '').trim();
                                return {
                                    type: 'é¦¬å˜',
                                    numbers: betNumbers,
                                    odds: '6-12å€'
                                };
                            }),
                            hitRate: raceInfo.strategies.balance.hitRate || "50",
                            confidence: parseInt(raceInfo.strategies.balance.hitRate || "50"),
                            risk: "ä¸­ãƒªã‚¹ã‚¯"
                        } : null,
                        aggressive: raceInfo.strategies.aggressive ? {
                            title: raceInfo.strategies.aggressive.title || "ğŸš€ é«˜é…å½“è¿½æ±‚å‹ãƒ¢ãƒ‡ãƒ«",
                            // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: è²·ã„ç›®ã‚’æ­£ã—ã„å½¢å¼ã§ä¿å­˜
                            bets: raceInfo.strategies.aggressive.bets.map(bet => {
                                const pointMatch = bet.match(/(\d+)ç‚¹/);
                                const points = pointMatch ? pointMatch[1] : "14";
                                // ç‚¹æ•°ã‚’å«ã‚ãŸæ­£ã—ã„å½¢å¼ã§ä¿å­˜
                                const betNumbers = bet.replace(/é¦¬å˜\s*/, '').trim();
                                return {
                                    type: 'é¦¬å˜',
                                    numbers: betNumbers,
                                    odds: '10-30å€'
                                };
                            }),
                            hitRate: raceInfo.strategies.aggressive.hitRate || "50",
                            confidence: parseInt(raceInfo.strategies.aggressive.hitRate || "50"),
                            risk: "é«˜ãƒªã‚¹ã‚¯"
                        } : null
                    }
                };

                jsonData.races.push(raceEntry);
                console.log(`âœ… ${raceNum}R æ—¢å­˜å½¢å¼å¤‰æ›å®Œäº†: ${raceInfo.horses.length}é ­ (${tier})`);
            }

            console.log('ğŸ“Š æ—¢å­˜å½¢å¼JSONå¤‰æ›å®Œäº†:', jsonData);
            return jsonData;
        }

        // é¦¬ãƒ‡ãƒ¼ã‚¿ã‚’æ—¢å­˜å½¢å¼ã«å¤‰æ›ã™ã‚‹é–¢æ•°
        function convertHorseToExistingFormat(horse) {
            if (!horse) return null;

            // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: ç‰¹å¾´é‡é‡è¦åº¦ã¯æœ¬å‘½ãƒ»å¯¾æŠ—ã®ã¿ï¼ˆå˜ç©´ãƒ»é€£ä¸‹ãƒ»æŠ¼ã•ãˆã¯é™¤å¤–ï¼‰
            const hasImportance = (horse.type === 'æœ¬å‘½' || horse.type === 'å¯¾æŠ—') &&
                                  horse.stability !== null && horse.ability !== null && horse.development !== null;

            return {
                number: horse.number,
                name: horse.name,
                mark: horse.mark,
                type: horse.type,
                factors: [
                    {
                        icon: "â˜…",
                        text: horse.stars ? `ç·åˆè©•ä¾¡:${horse.stars}` : "ç·åˆè©•ä¾¡:â˜…â˜…â˜…"
                    },
                    {
                        icon: "â˜…",
                        text: `ç´¯ç©ã‚¹ã‚³ã‚¢: ${horse.score}pt`
                    }
                ],
                // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: æœ¬å‘½ãƒ»å¯¾æŠ—ã®ã¿ç‰¹å¾´é‡é‡è¦åº¦ã‚’å«ã‚ã‚‹
                importance: hasImportance ? [
                    {
                        label: "å®‰å®šæ€§",
                        value: parseFloat(horse.stability) / 100
                    },
                    {
                        label: "èƒ½åŠ›ä¸Šä½æ€§",
                        value: parseFloat(horse.ability) / 100
                    },
                    {
                        label: "å±•é–‹åˆ©",
                        value: parseFloat(horse.development) / 100
                    }
                ] : []
            };
        }

        // Super Simpleç‰ˆãƒ‡ãƒ¼ã‚¿è§£æé–¢æ•°ï¼ˆæ ¹æœ¬ã‹ã‚‰æ–°è¨­è¨ˆï¼‰
        function parseSuperSimpleData(data) {
            console.log('ğŸš€ Super Simpleç‰ˆãƒ‡ãƒ¼ã‚¿è§£æé–‹å§‹');

            const lines = data.split('\n').map(line => line.trim()).filter(line => line);
            const raceData = {};
            let currentRace = null;
            let currentStrategy = null; // ç¾åœ¨å‡¦ç†ä¸­ã®æˆ¦ç•¥
            let raceInfo = {}; // ãƒ¬ãƒ¼ã‚¹æƒ…å ±ã‚’ä¿å­˜
            let globalDate = null; // å…¨ãƒ¬ãƒ¼ã‚¹å…±é€šã®æ—¥ä»˜

            // ğŸ” ã¾ãšå…¨ä½“ã‹ã‚‰æ—¥ä»˜ã¨ç«¶é¦¬å ´ã‚’æ¤œç´¢
            console.log('ğŸ“… å…¨ä½“æ—¥ä»˜ãƒ»ç«¶é¦¬å ´æ¤œç´¢é–‹å§‹');
            let globalTrack = null;

            for (const line of lines) {
                // 2025å¹´9æœˆ19æ—¥ å½¢å¼ã®æ—¥ä»˜ã‚’æ¤œç´¢
                const fullDateMatch = line.match(/(\d{4})å¹´(\d{1,2})æœˆ(\d{1,2})æ—¥/);
                if (fullDateMatch) {
                    const [, year, month, day] = fullDateMatch;
                    globalDate = `${parseInt(month)}/${parseInt(day)}`;
                    console.log(`ğŸ“… å…¨ä½“æ—¥ä»˜æ¤œå‡ºæˆåŠŸ: "${line}" â†’ ${globalDate}`);
                }

                // M/D å½¢å¼ã®æ—¥ä»˜ã‚‚æ¤œç´¢ï¼ˆã€Œæµ¦å’Œ9/23ã€å½¢å¼ã«å¯¾å¿œï¼‰
                const trackDateMatch = line.match(/^(å¤§äº•|å·å´|èˆ¹æ©‹|æµ¦å’Œ)(\d{1,2}\/\d{1,2})(?:\s|$)/);
                if (trackDateMatch) {
                    globalTrack = `${trackDateMatch[1]}ç«¶é¦¬`;
                    if (!globalDate) {
                        globalDate = trackDateMatch[2];
                    }
                    console.log(`ğŸ“… ç«¶é¦¬å ´ãƒ»æ—¥ä»˜æ¤œå‡ºæˆåŠŸ: "${line}" â†’ ç«¶é¦¬å ´=${globalTrack}, æ—¥ä»˜=${globalDate}`);
                }

                // å˜ç‹¬ã®M/Då½¢å¼æ—¥ä»˜
                const simpleDateMatch = line.match(/^(\d{1,2}\/\d{1,2})(?:\s|$)/);
                if (simpleDateMatch && !globalDate) {
                    globalDate = simpleDateMatch[1];
                    console.log(`ğŸ“… å…¨ä½“æ—¥ä»˜æ¤œå‡ºæˆåŠŸ(M/Då½¢å¼): "${line}" â†’ ${globalDate}`);
                }
            }

            if (!globalDate) {
                console.warn('âš ï¸ å…¨ä½“æ—¥ä»˜ãŒæ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ');
            }

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                console.log(`ğŸ“ å‡¦ç†è¡Œ: "${line}"`);

                // æ—¥ä»˜è¡Œãƒ»ç«¶é¦¬å ´è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼ˆæ—¢ã«å‡¦ç†æ¸ˆã¿ï¼‰
                if (line.match(/(\d{4})å¹´(\d{1,2})æœˆ(\d{1,2})æ—¥/) ||
                    line.match(/^(\d{1,2}\/\d{1,2})(?:\s|$)/) ||
                    line.match(/^(å¤§äº•|å·å´|èˆ¹æ©‹|æµ¦å’Œ)\d{1,2}\/\d{1,2}(?:\s|$)/)) {
                    console.log(`ğŸ“… æ—¥ä»˜ãƒ»ç«¶é¦¬å ´è¡Œã‚¹ã‚­ãƒƒãƒ—: "${line}"`);
                    continue;
                }

                // ãƒ¬ãƒ¼ã‚¹ç•ªå·æ¤œå‡ºï¼ˆæµ¦å’Œ1Rå½¢å¼ã«ã‚‚å¯¾å¿œï¼‰ + ãƒ¬ãƒ¼ã‚¹è©³ç´°è§£æ
                const raceMatch = line.match(/^(å¤§äº•|å·å´|èˆ¹æ©‹|æµ¦å’Œ)?(\d{1,2})[rRãƒ¬ãƒ¼ã‚¹]/);
                if (raceMatch) {
                    currentRace = parseInt(raceMatch[2]);
                    currentStrategy = null; // æ–°ãƒ¬ãƒ¼ã‚¹ã§æˆ¦ç•¥ã‚’ãƒªã‚»ãƒƒãƒˆ

                    // ãƒ¬ãƒ¼ã‚¹è©³ç´°ã‚’è§£æï¼ˆå¼·åŒ–ç‰ˆï¼‰
                    console.log(`ğŸ” ãƒ¬ãƒ¼ã‚¹è¡Œè§£æé–‹å§‹: "${line}"`);

                    // ã‚ˆã‚ŠæŸ”è»Ÿãªæ—¥ä»˜æŠ½å‡ºï¼ˆè¡Œã®æœ€åˆã‹ã‚‰æ—¥ä»˜ã‚’æ¢ã™ï¼‰
                    const dateMatch = line.match(/^(\d+\/\d+)/);
                    const extractedDate = dateMatch ? dateMatch[1] : null;
                    console.log(`ğŸ“… æ—¥ä»˜æŠ½å‡ºçµæœ: ${extractedDate}`);

                    const raceDetailMatch = line.match(/^(\d+\/\d+)?(å¤§äº•|å·å´|èˆ¹æ©‹|æµ¦å’Œ)?(\d{1,2})[rRãƒ¬ãƒ¼ã‚¹]\s*([^\d]*?)\s*([ãƒ€èŠ]?\d+[mM]?)?\s*[ï¼ˆ(](\d+)é ­[ï¼‰)]\s*ç™ºèµ°æ™‚åˆ»(\d{1,2}:\d{2})?/);

                    // ç«¶é¦¬å ´ã‚’æ­£ç¢ºã«æ¤œå‡ºï¼ˆæµ¦å’Œå¯¾å¿œï¼‰
                    const trackMatch = line.match(/(å¤§äº•|å·å´|èˆ¹æ©‹|æµ¦å’Œ)/);
                    const detectedTrack = trackMatch ? `${trackMatch[1]}ç«¶é¦¬` : null;

                    let parsedInfo = {
                        date: extractedDate || globalDate, // è¡Œå†…æ—¥ä»˜ã¾ãŸã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«æ—¥ä»˜ã‚’ä½¿ç”¨
                        track: detectedTrack || globalTrack || "æœªæŒ‡å®š", // æ¤œå‡ºã•ã‚ŒãŸç«¶é¦¬å ´åã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ç«¶é¦¬å ´ã€ã¾ãŸã¯æœªæŒ‡å®š
                        raceName: "",
                        distance: "1400m",
                        horseCount: 0,
                        startTime: "14:45",
                        raceCondition: ""
                    };

                    if (raceDetailMatch) {
                        // æ­£è¦è¡¨ç¾ã‹ã‚‰ã‚‚æ—¥ä»˜ã‚’å–å¾—ã—ã€ã‚ˆã‚Šç¢ºå®Ÿãªæ–¹ã‚’ä½¿ç”¨
                        if (raceDetailMatch[1] && !parsedInfo.date) {
                            parsedInfo.date = raceDetailMatch[1];
                        }
                        // trackã¯æ—¢ã«ä¸Šã§æ¤œå‡ºæ¸ˆã¿ãªã®ã§ã€å„ªå…ˆåº¦ã‚’æ­£ã—ãè¨­å®š
                        if (raceDetailMatch[2]) {
                            parsedInfo.track = `${raceDetailMatch[2]}ç«¶é¦¬`;
                        }
                        parsedInfo.raceName = raceDetailMatch[4] ? raceDetailMatch[4].trim() : "";
                        parsedInfo.distance = raceDetailMatch[5] || "1400m";
                        parsedInfo.horseCount = parseInt(raceDetailMatch[6]) || 0;
                        parsedInfo.startTime = raceDetailMatch[7] || "14:45";
                        console.log(`ğŸ“Š ãƒ¬ãƒ¼ã‚¹è©³ç´°è§£ææˆåŠŸ: æ—¥ä»˜=${parsedInfo.date}, ç«¶é¦¬å ´=${parsedInfo.track}, ãƒ¬ãƒ¼ã‚¹å="${parsedInfo.raceName}", è·é›¢=${parsedInfo.distance}, é ­æ•°=${parsedInfo.horseCount}, ç™ºèµ°=${parsedInfo.startTime}`);
                    } else {
                        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è§£æï¼ˆã•ã‚‰ã«æŸ”è»Ÿã«ï¼‰
                        const simpleMatch = line.match(/(\d+\/\d+)?(å¤§äº•|å·å´|èˆ¹æ©‹|æµ¦å’Œ)?(\d{1,2})R\s*(.+)/);
                        if (simpleMatch) {
                            if (simpleMatch[1] && !parsedInfo.date) {
                                parsedInfo.date = simpleMatch[1];
                            } else if (!parsedInfo.date) {
                                parsedInfo.date = globalDate; // ã‚°ãƒ­ãƒ¼ãƒãƒ«æ—¥ä»˜ã‚’ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã«ä½¿ç”¨
                            }
                            // trackãŒæ—¢ã«æ¤œå‡ºã•ã‚Œã¦ã„ãªã„å ´åˆã®ã¿è¨­å®š
                            if (simpleMatch[2] && parsedInfo.track === "æœªæŒ‡å®š") {
                                parsedInfo.track = `${simpleMatch[2]}ç«¶é¦¬`;
                            } else if (parsedInfo.track === "æœªæŒ‡å®š" && globalTrack) {
                                parsedInfo.track = globalTrack;
                            }
                            parsedInfo.raceName = simpleMatch[4] ? simpleMatch[4].trim() : "";
                            console.log(`ğŸ“Š ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è§£ææˆåŠŸ: æ—¥ä»˜=${parsedInfo.date}, ç«¶é¦¬å ´=${parsedInfo.track}, ãƒ¬ãƒ¼ã‚¹å="${parsedInfo.raceName}"`);
                        } else {
                            // æœ€çµ‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šã‚°ãƒ­ãƒ¼ãƒãƒ«æ—¥ä»˜ãƒ»ç«¶é¦¬å ´ã‚’ç¢ºå®Ÿã«è¨­å®š
                            if (!parsedInfo.date && globalDate) {
                                parsedInfo.date = globalDate;
                                console.log(`ğŸ“Š æœ€çµ‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã‚°ãƒ­ãƒ¼ãƒãƒ«æ—¥ä»˜=${globalDate}ã‚’é©ç”¨`);
                            }
                            if (parsedInfo.track === "æœªæŒ‡å®š" && globalTrack) {
                                parsedInfo.track = globalTrack;
                                console.log(`ğŸ“Š æœ€çµ‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã‚°ãƒ­ãƒ¼ãƒãƒ«ç«¶é¦¬å ´=${globalTrack}ã‚’é©ç”¨`);
                            }
                            if (!parsedInfo.date || parsedInfo.track === "æœªæŒ‡å®š") {
                                console.log(`âš ï¸ ãƒ¬ãƒ¼ã‚¹è§£æå¤±æ•—: "${line}"`);
                            }
                        }
                    }

                    raceData[currentRace] = {
                        horses: [],
                        strategies: { safe: null, balance: null, aggressive: null },
                        raceInfo: parsedInfo
                    };

                    console.log(`ğŸ ${currentRace}R é–‹å§‹ - è¡Œ: "${line}"`);
                    console.log(`ğŸ“‹ è§£æã•ã‚ŒãŸãƒ¬ãƒ¼ã‚¹æƒ…å ±:`, parsedInfo);
                    continue;
                }

                if (!currentRace) continue;

                // é¦¬æƒ…å ±ã®è§£æï¼ˆå®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿å½¢å¼å¯¾å¿œï¼‰
                const horseMatch = line.match(/^([â—â—‹â–²â–³Ã—])\s*([0-9]+)\s+([^\s]+)\s+(æœ¬å‘½|å¯¾æŠ—|å˜ç©´)/);
                if (horseMatch) {
                    const [, mark, number, name, type] = horseMatch;

                    // æ˜Ÿè©•ä¾¡ã¯æœ¬å‘½ãƒ»å¯¾æŠ—ãƒ»å˜ç©´ã®ã¿
                    let stars = '';
                    if (type === 'æœ¬å‘½' || type === 'å¯¾æŠ—' || type === 'å˜ç©´') {
                        stars = 'â˜…â˜…â˜…';
                    }

                    // ã‚¹ã‚³ã‚¢ã¯æ¬¡ã®è¡Œã‹ã‚‰å–å¾—
                    let score = '75'; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤

                    const horseData = {
                        number: parseInt(number),
                        name: name,
                        mark: mark,
                        type: type,
                        score: score,
                        stars: stars,
                        stability: null,  // åˆæœŸå€¤ã‚’nullã«è¨­å®šï¼ˆå¾©æ´»é˜²æ­¢å¯¾ç­–ï¼‰
                        ability: null,    // åˆæœŸå€¤ã‚’nullã«è¨­å®šï¼ˆå¾©æ´»é˜²æ­¢å¯¾ç­–ï¼‰
                        development: null // åˆæœŸå€¤ã‚’nullã«è¨­å®šï¼ˆå¾©æ´»é˜²æ­¢å¯¾ç­–ï¼‰
                    };

                    raceData[currentRace].horses.push(horseData);
                    console.log(`ğŸ é¦¬è¿½åŠ : ${mark}${number} ${name} (${type}) ${score}pt ${stars}`);
                    continue;
                }

                // ã‚¹ã‚³ã‚¢æƒ…å ±ã®è§£æ
                if (line.includes('ç´¯ç©ã‚¹ã‚³ã‚¢:') && raceData[currentRace] && raceData[currentRace].horses.length > 0) {
                    const scoreMatch = line.match(/ç´¯ç©ã‚¹ã‚³ã‚¢:\s*([0-9]+)pt/);
                    if (scoreMatch) {
                        const lastHorse = raceData[currentRace].horses[raceData[currentRace].horses.length - 1];
                        lastHorse.score = scoreMatch[1];
                        console.log(`ğŸ“Š ã‚¹ã‚³ã‚¢æ›´æ–°: ${lastHorse.name} â†’ ${lastHorse.score}pt`);
                    }
                    continue;
                }

                // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢å¯¾ç­–: ç‰¹å¾´é‡é‡è¦åº¦ã®è§£æï¼ˆæœ¬å‘½ãƒ»å¯¾æŠ—ã®ã¿ï¼‰- ãƒãƒ«ãƒãƒ©ã‚¤ãƒ³å¯¾å¿œ
                if ((line.includes('å®‰å®šæ€§') || line.includes('èƒ½åŠ›ä¸Šä½æ€§') || line.includes('å±•é–‹åˆ©')) && line.includes('%') &&
                    raceData[currentRace] && raceData[currentRace].horses.length > 0) {
                    const lastHorse = raceData[currentRace].horses[raceData[currentRace].horses.length - 1];
                    console.log(`ğŸ” ç‰¹å¾´é‡é‡è¦åº¦è¡Œæ¤œå‡º: "${line}" â†’ å¯¾è±¡é¦¬: ${lastHorse.name} (${lastHorse.type})`);

                    // ğŸ›¡ï¸ æœ¬å‘½ãƒ»å¯¾æŠ—ã®å ´åˆã®ã¿ç‰¹å¾´é‡é‡è¦åº¦ã‚’å–å¾—ï¼ˆå¾©æ´»é˜²æ­¢å¯¾ç­–ï¼‰
                    if (lastHorse.type === 'æœ¬å‘½' || lastHorse.type === 'å¯¾æŠ—') {
                        // å„ç‰¹å¾´é‡ã‚’å€‹åˆ¥ã«ãƒã‚§ãƒƒã‚¯ï¼ˆãƒãƒ«ãƒãƒ©ã‚¤ãƒ³å¯¾å¿œï¼‰
                        const stabilityMatch = line.match(/å®‰å®šæ€§([0-9]+)%/);
                        const abilityMatch = line.match(/èƒ½åŠ›ä¸Šä½æ€§([0-9]+)%/);
                        const developmentMatch = line.match(/å±•é–‹åˆ©([0-9]+)%/);

                        if (stabilityMatch) {
                            lastHorse.stability = stabilityMatch[1];
                            console.log(`âœ… å®‰å®šæ€§å–å¾—: ${lastHorse.name} â†’ ${lastHorse.stability}%`);
                        }
                        if (abilityMatch) {
                            lastHorse.ability = abilityMatch[1];
                            console.log(`âœ… èƒ½åŠ›ä¸Šä½æ€§å–å¾—: ${lastHorse.name} â†’ ${lastHorse.ability}%`);
                        }
                        if (developmentMatch) {
                            lastHorse.development = developmentMatch[1];
                            console.log(`âœ… å±•é–‹åˆ©å–å¾—: ${lastHorse.name} â†’ ${lastHorse.development}%`);
                        }

                        // å…¨ã¦ã®å€¤ãŒå–å¾—ã§ããŸå ´åˆã®ã¿æœ€çµ‚ãƒ­ã‚°è¡¨ç¤º
                        if (lastHorse.stability !== null && lastHorse.ability !== null && lastHorse.development !== null) {
                            console.log(`ğŸ“Š ç‰¹å¾´é‡å®Œå…¨å–å¾—: ${lastHorse.name} (${lastHorse.type}) â†’ å®‰å®šæ€§${lastHorse.stability}% èƒ½åŠ›ä¸Šä½æ€§${lastHorse.ability}% å±•é–‹åˆ©${lastHorse.development}%`);
                        } else {
                            console.log(`â³ ç‰¹å¾´é‡éƒ¨åˆ†å–å¾—: ${lastHorse.name} (${lastHorse.type}) â†’ å®‰å®šæ€§${lastHorse.stability}% èƒ½åŠ›ä¸Šä½æ€§${lastHorse.ability}% å±•é–‹åˆ©${lastHorse.development}%`);
                        }
                    } else {
                        console.log(`âš ï¸ ç‰¹å¾´é‡é‡è¦åº¦ã‚¹ã‚­ãƒƒãƒ—: ${lastHorse.name} (${lastHorse.type}) - æœ¬å‘½ãƒ»å¯¾æŠ—ä»¥å¤–`);
                    }
                    continue;
                }

                // é€£ä¸‹å€™è£œé¦¬ãƒ˜ãƒƒãƒ€ãƒ¼æ¤œå‡º
                if (line.includes('é€£ä¸‹å€™è£œé¦¬')) {
                    console.log(`ğŸ” é€£ä¸‹å€™è£œé¦¬ãƒ˜ãƒƒãƒ€ãƒ¼: "${line}"`);
                    continue;
                }

                // æŠ¼ã•ãˆå€™è£œé¦¬ãƒ˜ãƒƒãƒ€ãƒ¼æ¤œå‡º
                if (line.includes('æŠ‘ãˆå€™è£œé¦¬')) {
                    console.log(`ğŸ” æŠ¼ã•ãˆå€™è£œé¦¬ãƒ˜ãƒƒãƒ€ãƒ¼: "${line}"`);
                    continue;
                }

                // å€™è£œé¦¬ãƒ‡ãƒ¼ã‚¿è¡Œã®è§£æï¼ˆç•ªå· + åå‰ + ã‚¹ã‚³ã‚¢å½¢å¼ï¼‰
                if (line.match(/^[0-9]+\s+[^\s]+\s+\([0-9]+pt\)/) && raceData[currentRace]) {
                    const candidateMatch = line.match(/^([0-9]+)\s+([^\s]+)\s+\(([0-9]+)pt\)/);
                    if (candidateMatch) {
                        const [, number, name, score] = candidateMatch;

                        // æœ€å¾Œã«è¦‹ãŸãƒ˜ãƒƒãƒ€ãƒ¼ã«åŸºã¥ã„ã¦ç¨®åˆ¥ã‚’æ±ºå®šï¼ˆç°¡æ˜“ç‰ˆï¼‰
                        let mark = 'â–³';
                        let type = 'é€£ä¸‹';

                        // å‰ã®è¡Œã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦æŠ¼ã•ãˆå€™è£œé¦¬ã®å¾Œã‹ã©ã†ã‹åˆ¤å®š
                        if (i > 0) {
                            for (let j = i - 1; j >= 0; j--) {
                                if (lines[j].includes('æŠ‘ãˆå€™è£œé¦¬')) {
                                    mark = 'Ã—';
                                    type = 'æŠ¼ã•ãˆ';
                                    break;
                                } else if (lines[j].includes('é€£ä¸‹å€™è£œé¦¬')) {
                                    mark = 'â–³';
                                    type = 'é€£ä¸‹';
                                    break;
                                } else if (lines[j].match(/^[0-9]+[rRãƒ¬ãƒ¼ã‚¹]/)) {
                                    // æ–°ã—ã„ãƒ¬ãƒ¼ã‚¹ã«åˆ°é”ã—ãŸã‚‰åœæ­¢
                                    break;
                                }
                            }
                        }

                        const horseData = {
                            number: parseInt(number),
                            name: name,
                            mark: mark,
                            type: type,
                            score: score,
                            stars: '',
                            stability: null,    // å€™è£œé¦¬ã¯ç‰¹å¾´é‡é‡è¦åº¦ãªã—ï¼ˆå¾©æ´»é˜²æ­¢å¯¾ç­–ï¼‰
                            ability: null,      // å€™è£œé¦¬ã¯ç‰¹å¾´é‡é‡è¦åº¦ãªã—ï¼ˆå¾©æ´»é˜²æ­¢å¯¾ç­–ï¼‰
                            development: null   // å€™è£œé¦¬ã¯ç‰¹å¾´é‡é‡è¦åº¦ãªã—ï¼ˆå¾©æ´»é˜²æ­¢å¯¾ç­–ï¼‰
                        };

                        raceData[currentRace].horses.push(horseData);
                        console.log(`ğŸ å€™è£œé¦¬è¿½åŠ : ${mark}${number} ${name} (${type}) ${score}pt`);
                    }
                    continue;
                }

                // æˆ¦ç•¥ãƒ˜ãƒƒãƒ€ãƒ¼æ¤œå‡º
                if (line.includes('å°‘ç‚¹æ•°çš„ä¸­å‹ãƒ¢ãƒ‡ãƒ«')) {
                    currentStrategy = 'safe';
                    raceData[currentRace].strategies.safe = {
                        title: "ğŸ¯ å°‘ç‚¹æ•°çš„ä¸­å‹ãƒ¢ãƒ‡ãƒ«",
                        hitRate: '50',
                        bets: []
                    };
                    console.log(`ğŸ¯ æˆ¦ç•¥é–‹å§‹: å°‘ç‚¹æ•°çš„ä¸­å‹ãƒ¢ãƒ‡ãƒ«`);
                    continue;
                } else if (line.includes('ãƒãƒ©ãƒ³ã‚¹å‹ãƒ¢ãƒ‡ãƒ«')) {
                    currentStrategy = 'balance';
                    raceData[currentRace].strategies.balance = {
                        title: "âš–ï¸ ãƒãƒ©ãƒ³ã‚¹å‹ãƒ¢ãƒ‡ãƒ«",
                        hitRate: '50',
                        bets: []
                    };
                    console.log(`ğŸ¯ æˆ¦ç•¥é–‹å§‹: ãƒãƒ©ãƒ³ã‚¹å‹ãƒ¢ãƒ‡ãƒ«`);
                    continue;
                } else if (line.includes('é«˜é…å½“è¿½æ±‚å‹ãƒ¢ãƒ‡ãƒ«')) {
                    currentStrategy = 'aggressive';
                    raceData[currentRace].strategies.aggressive = {
                        title: "ğŸš€ é«˜é…å½“è¿½æ±‚å‹ãƒ¢ãƒ‡ãƒ«",
                        hitRate: '50',
                        bets: []
                    };
                    console.log(`ğŸ¯ æˆ¦ç•¥é–‹å§‹: é«˜é…å½“è¿½æ±‚å‹ãƒ¢ãƒ‡ãƒ«`);
                    continue;
                }

                // è²·ã„ç›®è¡Œã®è§£æï¼ˆç¾åœ¨ã®æˆ¦ç•¥ã«è¿½åŠ ï¼‰
                if (line.includes('é¦¬å˜') && currentStrategy && raceData[currentRace].strategies[currentStrategy]) {
                    console.log(`ğŸ¯ è²·ã„ç›®è¡Œ: "${line}" â†’ ${currentStrategy}æˆ¦ç•¥`);

                    // è²·ã„ç›®æŠ½å‡ºï¼ˆè‡ªå‹•ç‚¹æ•°è¨ˆç®—ä»˜ãï¼‰
                    const betText = line.trim();
                    const correctedBet = addPointsToBet(betText);

                    // å…ƒã®ç‚¹æ•°ã¨è¨ˆç®—å€¤ãŒç•°ãªã‚‹å ´åˆã¯è­¦å‘Š
                    const originalPoints = betText.match(/(\d+)ç‚¹/);
                    const calculatedPoints = calculateBetPoints(betText);
                    if (originalPoints && parseInt(originalPoints[1]) !== calculatedPoints) {
                        console.warn(`âš ï¸ ç‚¹æ•°ä¿®æ­£: ${betText} â†’ ${correctedBet}`);
                    }

                    raceData[currentRace].strategies[currentStrategy].bets.push(correctedBet);
                    console.log(`âœ… è²·ã„ç›®è¿½åŠ : ${correctedBet}`);
                    continue;
                }

                // AIäºˆæ¸¬ç‡ã®è§£æï¼ˆç¾åœ¨ã®æˆ¦ç•¥ã«è¨­å®šï¼‰
                if (line.includes('AIäºˆæ¸¬') && currentStrategy && raceData[currentRace].strategies[currentStrategy]) {
                    const rateMatch = line.match(/([0-9]+)%/);
                    if (rateMatch) {
                        raceData[currentRace].strategies[currentStrategy].hitRate = rateMatch[1];
                        console.log(`âœ… AIäºˆæ¸¬ç‡è¨­å®š: ${currentStrategy} â†’ ${rateMatch[1]}%`);
                    }
                    continue;
                }
            }

            // å„ãƒ¬ãƒ¼ã‚¹ã®é¦¬ã‚’é‡è¦åº¦é †ã§ã‚½ãƒ¼ãƒˆ
            for (const [raceNum, raceInfo] of Object.entries(raceData)) {
                const typeOrder = { 'æœ¬å‘½': 1, 'å¯¾æŠ—': 2, 'å˜ç©´': 3, 'é€£ä¸‹': 4, 'æŠ¼ã•ãˆ': 5 };
                raceInfo.horses.sort((a, b) => {
                    const orderA = typeOrder[a.type] || 9;
                    const orderB = typeOrder[b.type] || 9;
                    if (orderA !== orderB) return orderA - orderB;
                    return a.number - b.number;
                });
                console.log(`ğŸ ${raceNum}R: ${raceInfo.horses.length}é ­ã‚’ã‚½ãƒ¼ãƒˆå®Œäº†`);
            }

            console.log('âœ… Super Simpleç‰ˆè§£æå®Œäº†:', raceData);
            return raceData;
        }

        // Super Simpleç‰ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
        function displaySuperSimplePreview(data) {
            console.log('ğŸ” Super Simpleç‰ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºé–‹å§‹', data);

            const previewContent = document.getElementById('super-simple-preview-content');
            if (!previewContent) {
                console.error('âŒ preview-contentãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return;
            }

            console.log('âœ… preview-contentè¦ç´ ç™ºè¦‹');

            let html = '<div class="race-grid">';

            // ãƒ‡ãƒ¼ã‚¿ãŒç©ºã®å ´åˆã®å‡¦ç†
            if (!data || Object.keys(data).length === 0) {
                html += '<p>âš ï¸ ãƒ‘ãƒ¼ã‚¹çµæœã«ãƒ¬ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã¾ã›ã‚“</p>';
                previewContent.innerHTML = html + '</div>';
                return;
            }

            for (let raceNum = 1; raceNum <= 12; raceNum++) {
                const raceInfo = data[raceNum];
                if (!raceInfo || !raceInfo.horses.length) continue;

                console.log(`ğŸ“‹ ${raceNum}R ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: ${raceInfo.horses.length}é ­`);

                // è§£æã•ã‚ŒãŸãƒ¬ãƒ¼ã‚¹æƒ…å ±ã‚’å–å¾—
                const raceDetails = raceInfo.raceInfo || {};
                const raceTitle = raceDetails.raceName ? `${raceNum}R ${raceDetails.raceName}` : `${raceNum}R`;
                const raceSubInfo = [];

                if (raceDetails.date) raceSubInfo.push(`ğŸ“… ${raceDetails.date}`);
                if (raceDetails.track) raceSubInfo.push(`ğŸ ${raceDetails.track}`);
                if (raceDetails.distance) raceSubInfo.push(`ğŸ“ ${raceDetails.distance}`);
                if (raceDetails.startTime) raceSubInfo.push(`â° ${raceDetails.startTime}`);
                if (raceDetails.horseCount) raceSubInfo.push(`ğŸ ${raceDetails.horseCount}é ­`);

                html += `
                    <div class="race-preview">
                        <h3>${raceTitle}</h3>
                        ${raceSubInfo.length > 0 ? `<div class="race-details">${raceSubInfo.join(' | ')}</div>` : ''}

                        <div class="horse-section">
                            <h4>ğŸ é¦¬æƒ…å ±ï¼ˆ${raceInfo.horses.length}é ­ï¼‰</h4>
                            <div class="horse-list">`;

                raceInfo.horses.forEach(horse => {
                    const starsDisplay = horse.stars ? `${horse.stars} ` : '';

                    // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢å¯¾ç­–: æœ¬å‘½ãƒ»å¯¾æŠ—ã®ã¿ã«ç‰¹å¾´é‡é‡è¦åº¦ã‚’è¡¨ç¤ºï¼ˆå³æ ¼ãƒã‚§ãƒƒã‚¯ï¼‰
                    let importanceText = '';
                    if ((horse.type === 'æœ¬å‘½' || horse.type === 'å¯¾æŠ—') &&
                        horse.stability !== null && horse.ability !== null && horse.development !== null &&
                        horse.stability !== undefined && horse.ability !== undefined && horse.development !== undefined &&
                        horse.stability !== '' && horse.ability !== '' && horse.development !== '') {
                        console.log(`âœ… ç‰¹å¾´é‡é‡è¦åº¦è¡¨ç¤º: ${horse.name} (${horse.type}) - å®‰å®šæ€§${horse.stability}% èƒ½åŠ›ä¸Šä½æ€§${horse.ability}% å±•é–‹åˆ©${horse.development}%`);
                        importanceText = `<span class="importance">ç‰¹å¾´é‡é‡è¦åº¦ å®‰å®šæ€§${horse.stability}% èƒ½åŠ›ä¸Šä½æ€§${horse.ability}% å±•é–‹åˆ©${horse.development}%</span>`;
                    } else {
                        console.log(`âš ï¸ ç‰¹å¾´é‡é‡è¦åº¦éè¡¨ç¤º: ${horse.name} (${horse.type}) - æ¡ä»¶ä¸é©åˆ (stability: ${horse.stability}, ability: ${horse.ability}, development: ${horse.development})`);
                    }

                    html += `
                        <div class="horse-item">
                            <span class="horse-mark">${horse.mark}</span>
                            <span class="horse-info">${horse.number}ç•ª ${horse.name} (${horse.type})</span>
                            <div class="horse-details">
                                <span class="factor">${starsDisplay}ç´¯ç©ã‚¹ã‚³ã‚¢: ${horse.score}pt</span>
                                ${importanceText}
                            </div>
                        </div>`;
                });

                html += `
                            </div>
                        </div>

                        <div class="strategy-preview">
                            <div class="strategy-item">
                                <h4>ğŸ¯ å°‘ç‚¹æ•°çš„ä¸­å‹</h4>
                                <div>${raceInfo.strategies.safe && raceInfo.strategies.safe.bets.length > 0 ?
                                    (() => {
                                        // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: ç‚¹æ•°ã‚’æ­£ç¢ºã«è¨ˆç®—
                                        let totalPoints = 0;
                                        const betTexts = raceInfo.strategies.safe.bets.map(bet => {
                                            const pointMatch = bet.match(/(\d+)ç‚¹/);
                                            if (pointMatch) {
                                                totalPoints += parseInt(pointMatch[1]);
                                            }
                                            return bet;
                                        });
                                        return `${betTexts.join('<br>')}<br><strong>åˆè¨ˆ: ${totalPoints || 3}ç‚¹</strong><br><strong>AIäºˆæ¸¬: ${raceInfo.strategies.safe.hitRate}%</strong>`;
                                    })() :
                                    'æœªè¨­å®š'}</div>
                            </div>
                            <div class="strategy-item">
                                <h4>âš–ï¸ ãƒãƒ©ãƒ³ã‚¹å‹</h4>
                                <div>${raceInfo.strategies.balance && raceInfo.strategies.balance.bets.length > 0 ?
                                    (() => {
                                        // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: ç‚¹æ•°ã‚’æ­£ç¢ºã«è¨ˆç®—
                                        let totalPoints = 0;
                                        const betTexts = raceInfo.strategies.balance.bets.map(bet => {
                                            const pointMatch = bet.match(/(\d+)ç‚¹/);
                                            if (pointMatch) {
                                                totalPoints += parseInt(pointMatch[1]);
                                            }
                                            return bet;
                                        });
                                        return `${betTexts.join('<br>')}<br><strong>åˆè¨ˆ: ${totalPoints || 11}ç‚¹</strong><br><strong>AIäºˆæ¸¬: ${raceInfo.strategies.balance.hitRate}%</strong>`;
                                    })() :
                                    'æœªè¨­å®š'}</div>
                            </div>
                            <div class="strategy-item">
                                <h4>ğŸš€ é«˜é…å½“è¿½æ±‚å‹</h4>
                                <div>${raceInfo.strategies.aggressive && raceInfo.strategies.aggressive.bets.length > 0 ?
                                    (() => {
                                        // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: ç‚¹æ•°ã‚’æ­£ç¢ºã«è¨ˆç®—
                                        let totalPoints = 0;
                                        const betTexts = raceInfo.strategies.aggressive.bets.map(bet => {
                                            const pointMatch = bet.match(/(\d+)ç‚¹/);
                                            if (pointMatch) {
                                                totalPoints += parseInt(pointMatch[1]);
                                            }
                                            return bet;
                                        });
                                        return `${betTexts.join('<br>')}<br><strong>åˆè¨ˆ: ${totalPoints || 14}ç‚¹</strong><br><strong>AIäºˆæ¸¬: ${raceInfo.strategies.aggressive.hitRate}%</strong>`;
                                    })() :
                                    'æœªè¨­å®š'}</div>
                            </div>
                        </div>
                    </div>
                `;
            }

            html += '</div>';
            previewContent.innerHTML = html;
        }

    </script>

    <style>
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .ai-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        .pulse {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        h1 {
            color: #3b82f6;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #64748b;
            font-size: 1.1rem;
        }

        .guarantee-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fbbf24 10%, #fef3c7 100%);
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 20px;
            margin: 30px auto;
            max-width: 600px;
            text-align: left;
        }

        .guarantee-box h3 {
            color: #92400e;
            margin-bottom: 15px;
            text-align: center;
        }

        .guarantee-box ul {
            list-style: none;
            padding: 0;
        }

        .guarantee-box li {
            margin: 8px 0;
            font-weight: 500;
        }

        .form-section {
            background: #1e293b;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .input-section h2 {
            color: #3b82f6;
            margin-bottom: 15px;
        }

        .format-guide {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .format-guide p {
            margin: 5px 0;
            color: #94a3b8;
        }

        .example-format {
            background: #111827;
            border: 1px solid #374151;
            border-radius: 6px;
            padding: 12px;
            margin-top: 10px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.85rem;
            color: #d1d5db;
            line-height: 1.4;
        }

        #super-simple-data {
            width: 100%;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            padding: 15px;
            color: #e2e8f0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            resize: vertical;
        }

        #super-simple-data::placeholder {
            color: #64748b;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 1rem;
            z-index: 10;
            position: relative;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn-success:hover {
            transform: translateY(-2px);
        }

        .btn-check {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            transition: transform 0.2s;
            display: inline-block;
        }

        .btn-check:hover {
            transform: translateY(-2px);
        }

        .preview-section, .success-section {
            background: #1e293b;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }

        .preview-section h2, .success-section h2 {
            color: #3b82f6;
            margin-bottom: 20px;
        }

        .race-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .race-preview {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 10px;
            padding: 20px;
        }

        .race-preview h3 {
            color: #f59e0b;
            margin-bottom: 10px;
            text-align: center;
        }

        .race-details {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 6px;
            padding: 8px 12px;
            margin-bottom: 15px;
            font-size: 0.85rem;
            color: #94a3b8;
            text-align: center;
            line-height: 1.3;
        }

        .horse-section {
            margin-bottom: 20px;
            padding: 15px;
            background: #1e293b;
            border-radius: 8px;
        }

        .horse-section h4 {
            color: #3b82f6;
            margin-bottom: 10px;
        }

        .horse-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .horse-item {
            padding: 12px;
            background: #0f172a;
            border-radius: 6px;
            border-left: 3px solid #3b82f6;
        }

        .horse-mark {
            font-weight: bold;
            font-size: 1.2rem;
            margin-right: 8px;
            color: #fbbf24;
        }

        .horse-info {
            font-weight: 600;
            color: #e2e8f0;
            margin-right: 12px;
        }

        .horse-details {
            margin-top: 6px;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .factor {
            font-size: 0.85rem;
            color: #94a3b8;
        }

        .strategy-item {
            margin-bottom: 15px;
            padding: 10px;
            background: #1e293b;
            border-radius: 8px;
        }

        .strategy-item h4 {
            margin: 0 0 8px 0;
            font-size: 0.9rem;
        }

        .strategy-item div {
            color: #e2e8f0;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .success-section {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            text-align: center;
        }

        .success-section h2 {
            color: white;
        }
    </style>
</BaseLayout>