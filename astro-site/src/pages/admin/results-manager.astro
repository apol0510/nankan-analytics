---
export const prerender = true;
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout title="çš„ä¸­çµæœç®¡ç†ã‚·ã‚¹ãƒ†ãƒ " description="æ¯æ—¥ã®çš„ä¸­çµæœã‚’å…¥åŠ›ã—ã¦ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•ç”Ÿæˆ">
    <div class="admin-container">
        <div class="admin-header">
            <h1>ğŸ¯ çš„ä¸­çµæœç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
            <p style="font-size: 1.1rem; margin-bottom: 25px;">æ˜¨æ—¥ã®çš„ä¸­çµæœã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚·ã‚¹ãƒ†ãƒ ã«è‡ªå‹•ç™»éŒ²ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™</p>

            <!-- ä½¿ã„æ–¹æ‰‹é † -->
            <div style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; padding: 25px; margin-bottom: 30px; text-align: left;">
                <h2 style="color: #3b82f6; margin-bottom: 15px; font-size: 1.3rem;">ğŸ“– ä½¿ã„æ–¹æ‰‹é †</h2>

                <div style="display: grid; gap: 15px;">
                    <div style="display: flex; gap: 15px; align-items: flex-start;">
                        <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">1</div>
                        <div>
                            <strong style="color: #60a5fa; font-size: 1rem;">æ˜¨æ—¥ã®çµæœãƒ‡ãƒ¼ã‚¿ã‚’è²¼ã‚Šä»˜ã‘</strong>
                            <p style="color: var(--accent-text-color); margin-top: 5px; font-size: 0.9rem;">
                                ç«¶é¦¬çµæœãƒ‡ãƒ¼ã‚¿ï¼ˆä¾‹ï¼šï¼™/ï¼˜å·å´ç«¶é¦¬äºˆæƒ³ æœ‰æ–™ç‰ˆã€€çµæœ ï¼‘ï¼² ï¼”-ï¼–é¦¬å˜ã€€1.900å†† çš„ä¸­ï¼...ï¼‰ã‚’ä¸‹ã®ã€Œæ˜¨æ—¥ã®çš„ä¸­çµæœå…¥åŠ›ã€æ¬„ã«è²¼ã‚Šä»˜ã‘
                            </p>
                        </div>
                    </div>

                    <div style="display: flex; gap: 15px; align-items: flex-start;">
                        <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">2</div>
                        <div>
                            <strong style="color: #60a5fa; font-size: 1rem;">ã€ŒğŸ“ˆ è§£æå®Ÿè¡Œã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</strong>
                            <p style="color: var(--accent-text-color); margin-top: 5px; font-size: 0.9rem;">
                                ãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•è§£æã•ã‚Œã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™
                            </p>
                        </div>
                    </div>

                    <div style="display: flex; gap: 15px; align-items: flex-start;">
                        <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">3</div>
                        <div>
                            <strong style="color: #60a5fa; font-size: 1rem;">ãƒ¬ãƒ¼ã‚¹åã‚’ä¸€æ‹¬å…¥åŠ›</strong>
                            <p style="color: var(--accent-text-color); margin-top: 5px; font-size: 0.9rem;">
                                premium-predictionsãƒšãƒ¼ã‚¸ã‹ã‚‰å…¨ãƒ¬ãƒ¼ã‚¹åã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã€Œâš¡ ä¸€æ‹¬å…¥åŠ›ã€æ¬„ã«è²¼ã‚Šä»˜ã‘ â†’ã€Œâš¡ ä¸€æ‹¬é©ç”¨ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
                            </p>
                        </div>
                    </div>

                    <div style="display: flex; gap: 15px; align-items: flex-start;">
                        <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">4</div>
                        <div>
                            <strong style="color: #60a5fa; font-size: 1rem;">æˆ¦ç•¥ãƒ»ç‚¹æ•°ã‚’é¸æŠ</strong>
                            <p style="color: var(--accent-text-color); margin-top: 5px; font-size: 0.9rem;">
                                å„ãƒ¬ãƒ¼ã‚¹ã®æˆ¦ç•¥ï¼ˆå°‘ç‚¹æ•°/ãƒãƒ©ãƒ³ã‚¹/é«˜é…å½“ï¼‰ã¨ç‚¹æ•°ã‚’é¸æŠ
                            </p>
                        </div>
                    </div>

                    <div style="display: flex; gap: 15px; align-items: flex-start;">
                        <div style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">5</div>
                        <div>
                            <strong style="color: #60a5fa; font-size: 1rem;">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONç”Ÿæˆ â†’ ã‚³ãƒ”ãƒ¼</strong>
                            <p style="color: var(--accent-text-color); margin-top: 5px; font-size: 0.9rem;">
                                ã€ŒğŸ† ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ ç”Ÿæˆã•ã‚ŒãŸJSONã‚³ãƒ¼ãƒ‰ã‚’ã€ŒğŸ“‹ ã‚³ãƒ”ãƒ¼ã€
                            </p>
                        </div>
                    </div>

                    <div style="display: flex; gap: 15px; align-items: flex-start;">
                        <div style="background: linear-gradient(135deg, #10b981, #059669); color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">6</div>
                        <div style="flex: 1;">
                            <strong style="color: #10b981; font-size: 1rem;">GitHubã§ç·¨é›†ã—ã¦æœ¬ç•ªåæ˜ </strong>
                            <p style="color: var(--accent-text-color); margin-top: 5px; font-size: 0.9rem; margin-bottom: 10px;">
                                ä¸‹ã®ã€ŒğŸŒ GitHubã§ç·¨é›†ï¼ˆæœ¬ç•ªåæ˜ ï¼‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ archiveResults.jsonãŒé–‹ãã¾ã™ â†’ è©²å½“æœˆã®ãƒ‡ãƒ¼ã‚¿å†…ã«è²¼ã‚Šä»˜ã‘ â†’ ä¸‹éƒ¨ã®ã€ŒCommit changesã€ã§æœ¬ç•ªåæ˜ å®Œäº†ï¼
                            </p>
                            <a href="https://github.com/apol0510/nankan-analytics/edit/main/astro-site/src/data/archiveResults.json"
                               target="_blank"
                               style="display: inline-block; background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all 0.3s; margin-top: 5px;">
                                ğŸŒ GitHubã§ç·¨é›†ï¼ˆæœ¬ç•ªåæ˜ ï¼‰
                            </a>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.3); border-radius: 8px;">
                    <strong style="color: #f59e0b;">ğŸ’¡ é‡è¦ãƒã‚¤ãƒ³ãƒˆ</strong>
                    <ul style="margin-top: 10px; padding-left: 20px; color: var(--accent-text-color); font-size: 0.9rem;">
                        <li style="margin-bottom: 5px;">GitHubã‚¨ãƒ‡ã‚£ã‚¿ã§ archiveResults.json ã‚’é–‹ã„ãŸã‚‰ã€æ—¢å­˜ã®æœˆãƒ‡ãƒ¼ã‚¿å†…ã®é©åˆ‡ãªæ—¥ä»˜ã«è¿½åŠ ã—ã¦ãã ã•ã„</li>
                        <li style="margin-bottom: 5px;">ç·¨é›†å¾Œã€ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã®ã€ŒCommit changesã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æœ¬ç•ªåæ˜ ã•ã‚Œã¾ã™ï¼ˆ1-2åˆ†å¾Œï¼‰</li>
                        <li style="margin-bottom: 5px;">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ãƒ»standard-predictionsãƒ»archiveå„ãƒšãƒ¼ã‚¸ã«è‡ªå‹•åæ˜ ã•ã‚Œã¾ã™</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- æ˜¨æ—¥ã®çµæœå…¥åŠ› -->
        <div class="input-section">
            <h2>ğŸ“Š æ˜¨æ—¥ã®çš„ä¸­çµæœå…¥åŠ›</h2>
            <div class="input-group">
                <label for="dailyData">çµæœãƒ‡ãƒ¼ã‚¿ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼š</label>
                <textarea
                    id="dailyData"
                    placeholder="ï¼™/ï¼˜å·å´ç«¶é¦¬äºˆæƒ³ æœ‰æ–™ç‰ˆã€€çµæœ
ï¼‘ï¼² ï¼”-ï¼–é¦¬å˜ã€€1.900å†† çš„ä¸­ï¼
ï¼’ï¼² ï¼—-12é¦¬å˜ã€€1.990å†† çš„ä¸­ï¼
..."
                    rows="15"
                ></textarea>
                <button onclick="parseDailyData()" class="parse-btn">ğŸ“ˆ è§£æå®Ÿè¡Œ</button>
            </div>
        </div>

        <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="preview-section">
            <h2>ğŸ‘€ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>
            <div id="daily-stats" class="stats-display"></div>
            <div id="daily-results" class="results-display"></div>
        </div>

        <!-- ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONç”Ÿæˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="output-section" style="margin-top: 30px;">
            <h2>ğŸ† ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONç”Ÿæˆ</h2>
            <p>æ˜¨æ—¥ã®çµæœã‹ã‚‰ <code>archiveResults.json</code> ç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ã¾ã™</p>

            <!-- è¿½åŠ æƒ…å ±å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
            <div class="archive-input-section">
                <h3 style="color: var(--primary-color); margin-bottom: 15px;">ğŸ“ ãƒ¬ãƒ¼ã‚¹è©³ç´°æƒ…å ±ã‚’å…¥åŠ›</h3>

                <!-- ä¸€æ‹¬å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
                <div style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 8px; padding: 20px; margin-bottom: 25px;">
                    <h4 style="color: #10b981; margin-bottom: 10px; font-size: 1rem;">âš¡ ä¸€æ‹¬å…¥åŠ›ï¼ˆæ¨å¥¨ï¼‰</h4>
                    <p style="color: var(--accent-text-color); font-size: 0.9rem; margin-bottom: 15px;">
                        premium-predictionsãƒšãƒ¼ã‚¸ã‹ã‚‰å…¨ãƒ¬ãƒ¼ã‚¹åã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„
                    </p>
                    <textarea
                        id="bulkRaceNames"
                        placeholder="premium-predictionsãƒšãƒ¼ã‚¸ã‹ã‚‰å…¨ãƒ¬ãƒ¼ã‚¹åã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„

ã€å¯¾å¿œå½¢å¼1ã€‘è¤‡æ•°è¡Œå½¢å¼:
1R
ï¼’æ­³(å…­) æœªå—è³
ç¬¬1ãƒ¬ãƒ¼ã‚¹
â–¼
2R
ï¼’æ­³(äº”)
ç¬¬2ãƒ¬ãƒ¼ã‚¹
...

ã€å¯¾å¿œå½¢å¼2ã€‘1è¡Œå½¢å¼:
1R ï¼“æ­³(å…­)
2R ãƒ­ãƒ¼ã‚ºãƒ‡ãƒ“ãƒ¥ãƒ¼
3R ãƒ­ãƒ¼ã‚ºãƒ‡ãƒ“ãƒ¥ãƒ¼
4R ï¼£ï¼’(å››)(äº”)
..."
                        rows="8"
                        style="width: 100%; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(148, 163, 184, 0.3); border-radius: 6px; padding: 12px; color: var(--body-text-color); font-family: monospace; font-size: 0.9rem;"
                    ></textarea>
                    <button onclick="applyBulkRaceNames()" class="parse-btn" style="margin-top: 10px; background: linear-gradient(135deg, #10b981, #059669);">
                        âš¡ ä¸€æ‹¬é©ç”¨
                    </button>
                </div>

                <p style="color: var(--accent-text-color); margin-bottom: 20px; font-size: 0.9rem;">
                    å„ãƒ¬ãƒ¼ã‚¹ã®è©³ç´°æƒ…å ±ï¼ˆåˆ¸ç¨®ã¯é¦¬å˜å›ºå®šã€æˆ¦ç•¥ãƒ»ç‚¹æ•°ã‚’é¸æŠï¼‰
                </p>

                <div id="raceDetailsForm" class="race-details-grid">
                    <!-- JavaScriptã§å‹•çš„ç”Ÿæˆ -->
                </div>

                <button onclick="generateArchiveJSON()" class="parse-btn" style="margin-top: 20px;">
                    ğŸ† ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONç”Ÿæˆ
                </button>
            </div>

            <div class="code-output" style="margin-top: 20px;">
                <pre id="archiveCode">// æ˜¨æ—¥ã®çµæœã‚’è§£æå¾Œã€ãƒ¬ãƒ¼ã‚¹æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONç”Ÿæˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„</pre>
                <button onclick="copyArchiveToClipboard()" class="copy-btn">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
            </div>
        </div>
    </div>

    <style>
        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: var(--body-text-color);
        }

        .admin-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(147, 51, 234, 0.1) 100%);
            border-radius: 16px;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .admin-header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .input-section {
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }

        .input-section h2 {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .input-group label {
            font-weight: 600;
            font-size: 1.1rem;
        }

        textarea {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 20px;
            color: var(--body-text-color);
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .parse-btn, .copy-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            align-self: flex-start;
        }

        .parse-btn:hover, .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }

        .preview-section {
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }

        .preview-section h2 {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .preview-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            background: rgba(148, 163, 184, 0.1);
            color: var(--body-text-color);
            border: 1px solid rgba(148, 163, 184, 0.2);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.3) 100%);
            color: #10b981;
            border-color: rgba(16, 185, 129, 0.3);
        }

        .stats-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: #10b981;
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--body-text-color);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .results-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 10px;
            max-width: 800px;
        }

        .race-result {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 8px;
            border-radius: 8px;
            font-size: 0.85rem;
        }

        .race-result.win {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.1) 100%);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .race-result.lose {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .race-number {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .race-icon {
            font-size: 1.2rem;
            margin-bottom: 3px;
        }

        .race-payout {
            font-weight: 700;
            font-size: 0.75rem;
        }

        .output-section {
            padding: 30px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }

        .output-section h2 {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .code-output {
            position: relative;
        }

        .code-output pre {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 8px;
            padding: 20px;
            color: #e2e8f0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 0.85rem;
        }

        code {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary-color);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        /* ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ« */
        .archive-input-section {
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .race-details-grid {
            display: grid;
            gap: 20px;
        }

        .race-detail-item {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 8px;
            padding: 15px;
        }

        .race-detail-item.hit {
            border-color: rgba(16, 185, 129, 0.4);
            background: rgba(16, 185, 129, 0.05);
        }

        .race-detail-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--body-text-color);
        }

        .race-detail-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .input-field {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .input-field label {
            font-size: 0.85rem;
            color: var(--accent-text-color);
            font-weight: 500;
        }

        .input-field input,
        .input-field select {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(148, 163, 184, 0.3);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--body-text-color);
            font-size: 0.9rem;
        }

        .input-field input:focus,
        .input-field select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        @media (max-width: 768px) {
            .admin-container {
                padding: 15px;
            }

            .admin-header h1 {
                font-size: 2rem;
            }

            .stats-display {
                grid-template-columns: repeat(2, 1fr);
            }

            .results-display {
                grid-template-columns: repeat(4, 1fr);
            }

            .race-detail-inputs {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <script is:inline>
        let dailyData = null;

        // å…¨è§’ãƒ»åŠè§’æ•°å­—ã®æ­£è¦åŒ–
        function normalizeText(text) {
            return text
                .replace(/[ï¼-ï¼™]/g, (s) => String.fromCharCode(s.charCodeAt(0) - 0xFEE0))
                .replace(/[ï¼²ï½’]/g, 'R')
                .replace(/[ï¼Œã€]/g, ',')
                .replace(/[ï¼ã€‚]/g, '.')
                .replace(/\s+/g, ' ')
                .trim();
        }

        // é‡‘é¡æŠ½å‡ºï¼ˆ1.900å†† â†’ 1900ï¼‰
        function extractPayout(text) {
            const match = text.match(/([0-9,]+(?:\.[0-9]+)?)å††/);
            if (match) {
                return parseInt(match[1].replace(/[,\.]/g, ''));
            }
            return 0;
        }

        // ãƒ¬ãƒ¼ã‚¹ç•ªå·æŠ½å‡ºï¼ˆï¼‘ï¼² â†’ 1ï¼‰
        function extractRaceNumber(text) {
            const normalized = normalizeText(text);
            const match = normalized.match(/(\d+)R/);
            return match ? parseInt(match[1]) : null;
        }

        // æ—¥ä»˜æŠ½å‡ºï¼ˆï¼™/ï¼˜å·å´ç«¶é¦¬ â†’ 9/8ï¼‰
        function extractDate(text) {
            const normalized = normalizeText(text);
            const match = normalized.match(/(\d+)\/(\d+)/);
            if (match) {
                return `${parseInt(match[1])}/${parseInt(match[2])}`;
            }
            return null;
        }

        // ç«¶é¦¬å ´æŠ½å‡ºï¼ˆï¼™/ï¼˜å·å´ç«¶é¦¬ â†’ å·å´ç«¶é¦¬ï¼‰
        function extractTrack(text) {
            const match = text.match(/(å·å´|å¤§äº•|èˆ¹æ©‹|æµ¦å’Œ)ç«¶é¦¬/);
            return match ? match[1] + 'ç«¶é¦¬' : 'å·å´ç«¶é¦¬';
        }

        // æ˜¨æ—¥ãƒ‡ãƒ¼ã‚¿è§£æ
        function parseDailyData() {
            const input = document.getElementById('dailyData').value;
            if (!input.trim()) {
                alert('ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            const lines = input.split('\n').filter(line => line.trim());
            const headerLine = lines[0];

            const date = extractDate(headerLine);
            const track = extractTrack(headerLine);

            if (!date) {
                alert('æ—¥ä»˜ã‚’æ­£ã—ãèªè­˜ã§ãã¾ã›ã‚“ã§ã—ãŸ');
                return;
            }

            // 12ãƒ¬ãƒ¼ã‚¹åˆ†ã®çµæœã‚’åˆæœŸåŒ–
            const results = [];
            for (let i = 1; i <= 12; i++) {
                results.push({ race: `${i}R`, result: 'lose', payout: 0 });
            }

            let totalPayout = 0;
            let hitCount = 0;

            // çš„ä¸­ãƒ¬ãƒ¼ã‚¹ã‚’è§£æ
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i];
                const raceNum = extractRaceNumber(line);
                const payout = extractPayout(line);

                if (raceNum && raceNum >= 1 && raceNum <= 12 && line.includes('çš„ä¸­')) {
                    results[raceNum - 1] = {
                        race: `${raceNum}R`,
                        result: 'win',
                        payout: payout
                    };
                    totalPayout += payout;
                    hitCount++;
                }
            }

            const hitRate = ((hitCount / 12) * 100).toFixed(1);
            const purchaseAmount = 12 * 1000; // ğŸ›¡ï¸ å¾©æ´»é˜²æ­¢: 12ãƒ¬ãƒ¼ã‚¹ Ã— 1000å††ï¼ˆè¨ˆç®—å¼çµ±ä¸€ï¼‰
            const recoveryRate = Math.round((totalPayout / purchaseAmount) * 100);

            dailyData = {
                date: date,
                track: track,
                hitRate: parseFloat(hitRate),
                hitCount: hitCount,
                totalCount: 12,
                totalPayout: totalPayout,
                recoveryRate: recoveryRate,
                results: results
            };

            displayDailyPreview();
            generateCode();
        }


        // æ˜¨æ—¥ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
        function displayDailyPreview() {
            if (!dailyData) return;

            const statsHtml = `
                <div class="stat-card">
                    <div class="stat-value">${dailyData.hitRate}%</div>
                    <div class="stat-label">çš„ä¸­ç‡ (${dailyData.hitCount}/${dailyData.totalCount})</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Â¥${dailyData.totalPayout.toLocaleString()}</div>
                    <div class="stat-label">é…å½“åˆè¨ˆ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${dailyData.recoveryRate}%</div>
                    <div class="stat-label">å›åç‡</div>
                </div>
            `;

            const resultsHtml = dailyData.results.map(result => `
                <div class="race-result ${result.result}">
                    <div class="race-number">${result.race}</div>
                    <div class="race-icon">${result.result === 'win' ? 'â­•' : 'âŒ'}</div>
                    ${result.result === 'win' ? `<div class="race-payout">Â¥${result.payout.toLocaleString()}</div>` : ''}
                </div>
            `).join('');

            document.getElementById('daily-stats').innerHTML = statsHtml;
            document.getElementById('daily-results').innerHTML = resultsHtml;

            // ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ç”¨ã®ãƒ¬ãƒ¼ã‚¹è©³ç´°ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç”Ÿæˆ
            generateRaceDetailsForm();
        }

        // ========== ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONç”Ÿæˆæ©Ÿèƒ½ ==========

        // ãƒ¬ãƒ¼ã‚¹è©³ç´°å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®ç”Ÿæˆ
        function generateRaceDetailsForm() {
            if (!dailyData) return;

            const formHTML = dailyData.results.map((r, index) => {
                const raceNum = index + 1;
                const isHit = r.result === 'win';

                return `
                    <div class="race-detail-item ${isHit ? 'hit' : ''}">
                        <div class="race-detail-header">
                            <span>${isHit ? 'âœ…' : 'âŒ'}</span>
                            <span>${raceNum}R</span>
                            ${isHit ? `<span style="color: #10b981;">çš„ä¸­ Â¥${r.payout.toLocaleString()}</span>` : '<span style="color: #64748b;">ä¸çš„ä¸­</span>'}
                        </div>
                        ${isHit ? `
                            <div class="race-detail-inputs">
                                <div class="input-field">
                                    <label>ãƒ¬ãƒ¼ã‚¹å *</label>
                                    <input type="text" id="raceName_${raceNum}" placeholder="ä¾‹ï¼š2æ­³æ–°é¦¬" style="width: 100%;" />
                                </div>
                                <div class="input-field">
                                    <label>æˆ¦ç•¥ *</label>
                                    <select id="strategy_${raceNum}" onchange="autoFillBetPoints(${raceNum})">
                                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                                        <option value="å°‘ç‚¹æ•°çš„ä¸­å‹" data-points="3">å°‘ç‚¹æ•°çš„ä¸­å‹ï¼ˆ3ç‚¹ï¼‰</option>
                                        <option value="ãƒãƒ©ãƒ³ã‚¹å‹" data-points="11">ãƒãƒ©ãƒ³ã‚¹å‹ï¼ˆ8-11ç‚¹ï¼‰</option>
                                        <option value="é«˜é…å½“è¿½æ±‚å‹" data-points="17">é«˜é…å½“è¿½æ±‚å‹ï¼ˆ14-17ç‚¹ï¼‰</option>
                                    </select>
                                </div>
                                <div class="input-field">
                                    <label>è²·ã„ç›®ç‚¹æ•° *</label>
                                    <input type="number" id="betPoints_${raceNum}" placeholder="è‡ªå‹•å…¥åŠ› or æ‰‹å‹•" min="1" />
                                </div>
                            </div>
                        ` : '<p style="color: #64748b; text-align: center; padding: 10px;">ä¸çš„ä¸­ã®ãŸã‚è©³ç´°å…¥åŠ›ä¸è¦</p>'}
                    </div>
                `;
            }).join('');

            document.getElementById('raceDetailsForm').innerHTML = formHTML;
        }

        // æˆ¦ç•¥é¸æŠæ™‚ã«è‡ªå‹•ã§ç‚¹æ•°å…¥åŠ›
        function autoFillBetPoints(raceNum) {
            const strategySelect = document.getElementById(`strategy_${raceNum}`);
            const betPointsInput = document.getElementById(`betPoints_${raceNum}`);
            const selectedOption = strategySelect.options[strategySelect.selectedIndex];
            const points = selectedOption.getAttribute('data-points');

            if (points) {
                betPointsInput.value = points;
            }
        }

        // ä¸€æ‹¬ãƒ¬ãƒ¼ã‚¹åé©ç”¨
        function applyBulkRaceNames() {
            const bulkInput = document.getElementById('bulkRaceNames').value;
            if (!bulkInput.trim()) {
                alert('ãƒ¬ãƒ¼ã‚¹åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            const lines = bulkInput.split('\n').map(line => line.trim()).filter(line => line);
            let appliedCount = 0;
            let currentRaceNum = null;

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];

                // ğŸ†• æ–°å½¢å¼å¯¾å¿œ: 1è¡Œå½¢å¼ï¼ˆä¾‹: "1R ï¼“æ­³(å…­)"ï¼‰
                const oneLineMatch = line.match(/^(\d+)R\s+(.+)$/);
                if (oneLineMatch) {
                    const raceNum = parseInt(oneLineMatch[1]);
                    const raceName = oneLineMatch[2].trim();
                    const input = document.getElementById(`raceName_${raceNum}`);
                    if (input && raceName) {
                        input.value = raceName;
                        appliedCount++;
                        console.log(`âœ… ${raceNum}R: ${raceName}`);
                    }
                    continue;
                }

                // æ—¢å­˜å½¢å¼å¯¾å¿œ: è¤‡æ•°è¡Œå½¢å¼ï¼ˆ1Ræ”¹è¡Œã€ãƒ¬ãƒ¼ã‚¹åæ”¹è¡Œ...ï¼‰
                const raceNumMatch = line.match(/^(\d+)R$/);
                if (raceNumMatch) {
                    currentRaceNum = parseInt(raceNumMatch[1]);
                    continue;
                }

                // ã€Œç¬¬Xãƒ¬ãƒ¼ã‚¹ã€ã€Œãƒ¡ã‚¤ãƒ³ãƒ¬ãƒ¼ã‚¹ã€ã€Œâ–¼ã€ãªã©ã‚’ã‚¹ã‚­ãƒƒãƒ—
                if (line.match(/^ç¬¬\d+ãƒ¬ãƒ¼ã‚¹$/) ||
                    line === 'ãƒ¡ã‚¤ãƒ³ãƒ¬ãƒ¼ã‚¹' ||
                    line === 'â–¼' ||
                    line.includes('â–¼')) {
                    continue;
                }

                // ãƒ¬ãƒ¼ã‚¹åã¨ã—ã¦èªè­˜ï¼ˆãƒ¬ãƒ¼ã‚¹ç•ªå·ã®ç›´å¾Œã®æœ‰åŠ¹ãªè¡Œï¼‰
                if (currentRaceNum && line) {
                    const input = document.getElementById(`raceName_${currentRaceNum}`);
                    if (input) {
                        // å…¨è§’æ•°å­—ãƒ»è¨˜å·ã‚’ãã®ã¾ã¾ä¿æŒ
                        input.value = line;
                        appliedCount++;
                        console.log(`âœ… ${currentRaceNum}R: ${line}`);
                    }
                    currentRaceNum = null; // æ¬¡ã®ãƒ¬ãƒ¼ã‚¹ã¸
                }
            }

            if (appliedCount > 0) {
                alert(`âœ… ${appliedCount}ãƒ¬ãƒ¼ã‚¹ã®ãƒ¬ãƒ¼ã‚¹åã‚’é©ç”¨ã—ã¾ã—ãŸ`);
            } else {
                alert('âš ï¸ ãƒ¬ãƒ¼ã‚¹åã‚’é©ç”¨ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚\n\npremium-predictionsãƒšãƒ¼ã‚¸ã‹ã‚‰ãƒ¬ãƒ¼ã‚¹åã‚’ãã®ã¾ã¾ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
            }
        }

        // ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONç”Ÿæˆ
        function generateArchiveJSON() {
            if (!dailyData) {
                alert('ã¾ãšæ˜¨æ—¥ã®çµæœã‚’è§£æã—ã¦ãã ã•ã„');
                return;
            }

            // æ—¥ä»˜ã‚’å¹´/æœˆ/æ—¥ã«åˆ†è§£
            const dateParts = dailyData.date.split('/');
            const year = '2025';  // å›ºå®šï¼ˆå¿…è¦ã«å¿œã˜ã¦å¤‰æ›´ï¼‰
            const month = dateParts[0].padStart(2, '0');
            const day = dateParts[1].padStart(2, '0');

            // ç«¶é¦¬å ´åã‹ã‚‰ã€Œç«¶é¦¬ã€ã‚’å‰Šé™¤
            const venue = dailyData.track.replace('ç«¶é¦¬', '');

            // ãƒ¬ãƒ¼ã‚¹é…åˆ—ã‚’ç”Ÿæˆ
            const races = [];
            let hasError = false;

            for (let i = 0; i < dailyData.results.length; i++) {
                const raceNum = i + 1;
                const result = dailyData.results[i];

                if (result.result === 'win') {
                    // çš„ä¸­ãƒ¬ãƒ¼ã‚¹ã¯è©³ç´°æƒ…å ±å¿…é ˆ
                    const raceName = document.getElementById(`raceName_${raceNum}`)?.value;
                    const strategy = document.getElementById(`strategy_${raceNum}`)?.value;
                    const betPoints = document.getElementById(`betPoints_${raceNum}`)?.value;

                    if (!raceName || !strategy || !betPoints) {
                        alert(`${raceNum}Rã®è©³ç´°æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆãƒ¬ãƒ¼ã‚¹åãƒ»æˆ¦ç•¥ãƒ»ç‚¹æ•°ï¼‰`);
                        hasError = true;
                        break;
                    }

                    races.push({
                        raceNumber: `${raceNum}R`,
                        raceName: raceName,
                        betType: "é¦¬å˜",
                        strategy: strategy,
                        betPoints: parseInt(betPoints),
                        hit: true,
                        payout: result.payout
                    });
                } else {
                    // ä¸çš„ä¸­ãƒ¬ãƒ¼ã‚¹ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«
                    races.push({
                        raceNumber: `${raceNum}R`,
                        raceName: "-",
                        betType: "é¦¬å˜",
                        strategy: "-",
                        betPoints: 0,
                        hit: false,
                        payout: 0
                    });
                }
            }

            if (hasError) return;

            // ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆçš„ä¸­åˆ¤å®š
            const perfectHit = dailyData.hitCount === dailyData.totalCount;

            // JSONæ§‹é€ ç”Ÿæˆ
            const archiveJSON = {
                [day]: {
                    venue: venue,
                    totalRaces: dailyData.totalCount,
                    hitRaces: dailyData.hitCount,
                    perfectHit: perfectHit,
                    totalPayout: dailyData.totalPayout,
                    races: races
                }
            };

            // æ•´å½¢ã—ã¦è¡¨ç¤º
            const jsonString = JSON.stringify(archiveJSON, null, 2);
            const output = `// ${year}å¹´${parseInt(month)}æœˆåˆ†ã®archiveResults.jsonã«è¿½åŠ ã—ã¦ãã ã•ã„
// ä»¥ä¸‹ã‚’ "2025" > "${month}" ã®ä¸­ã«è¿½åŠ ï¼š

${jsonString}

// ä½¿ç”¨æ–¹æ³•ï¼š
// 1. src/data/archiveResults.json ã‚’é–‹ã
// 2. "2025" > "${month}" ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¢ã™
// 3. ä¸Šè¨˜ã®JSONã‚’è©²å½“æœˆã®ä¸­ã«è¿½åŠ 
// 4. æ—¢å­˜ã®ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã«æ³¨æ„ã—ã¦ãã ã•ã„`;

            document.getElementById('archiveCode').textContent = output;
        }

        // ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONã‚³ãƒ”ãƒ¼
        async function copyArchiveToClipboard() {
            const code = document.getElementById('archiveCode').textContent;
            if (code && !code.includes('æ˜¨æ—¥ã®çµæœã‚’è§£æå¾Œ')) {
                try {
                    await navigator.clipboard.writeText(code);
                    alert('ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
                } catch (err) {
                    console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                    alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
                }
            } else {
                alert('ç”Ÿæˆã•ã‚ŒãŸJSONãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã‚¢ãƒ¼ã‚«ã‚¤ãƒ–JSONç”Ÿæˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚');
            }
        }

    </script>
</BaseLayout>