---
export const prerender = true;
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout title="çš„ä¸­çµæœç®¡ç†ã‚·ã‚¹ãƒ†ãƒ " description="æ¯æ—¥ã®çš„ä¸­çµæœã‚’å…¥åŠ›ã—ã¦ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•ç”Ÿæˆ">
    <div class="admin-container">
        <div class="admin-header">
            <h1>ğŸ¯ çš„ä¸­çµæœç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
            <p>æ¯æ—¥ãƒ»é€±é–“ã®çš„ä¸­çµæœã‚’å…¥åŠ›ã—ã¦ã€ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™</p>
        </div>

        <!-- æ˜¨æ—¥ã®çµæœå…¥åŠ› -->
        <div class="input-section">
            <h2>ğŸ“Š æ˜¨æ—¥ã®çš„ä¸­çµæœå…¥åŠ›</h2>
            <div class="input-group">
                <label for="dailyData">çµæœãƒ‡ãƒ¼ã‚¿ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼š</label>
                <textarea
                    id="dailyData"
                    placeholder="ï¼™/ï¼˜å·å´ç«¶é¦¬äºˆæƒ³ æœ‰æ–™ç‰ˆã€€çµæœ
ï¼‘ï¼² ï¼”-ï¼–é¦¬å˜ã€€1.900å†† çš„ä¸­ï¼
ï¼’ï¼² ï¼—-12é¦¬å˜ã€€1.990å†† çš„ä¸­ï¼
..."
                    rows="15"
                ></textarea>
                <button onclick="parseDailyData()" class="parse-btn">ğŸ“ˆ è§£æå®Ÿè¡Œ</button>
            </div>
        </div>

        <!-- é€±é–“çµæœå…¥åŠ› -->
        <div class="input-section">
            <h2>ğŸ“… é€±é–“çµæœå…¥åŠ›ï¼ˆ5æ—¥åˆ†ï¼‰</h2>
            <div class="input-group">
                <label for="weeklyData">5æ—¥åˆ†ã®çµæœãƒ‡ãƒ¼ã‚¿ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ï¼š</label>
                <textarea
                    id="weeklyData"
                    placeholder="ï¼™/ï¼˜å·å´ç«¶é¦¬äºˆæƒ³ æœ‰æ–™ç‰ˆã€€çµæœ
ï¼‘ï¼² ï¼”-ï¼–é¦¬å˜ã€€1.900å†† çš„ä¸­ï¼
...

ï¼™/ï¼™å·å´ç«¶é¦¬äºˆæƒ³ æœ‰æ–™ç‰ˆã€€çµæœ
ï¼’ï¼² ï¼—-12é¦¬å˜ã€€1.990å†† çš„ä¸­ï¼
..."
                    rows="20"
                ></textarea>
                <button onclick="parseWeeklyData()" class="parse-btn">ğŸ“Š é€±é–“è§£æå®Ÿè¡Œ</button>
            </div>
        </div>

        <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="preview-section">
            <h2>ğŸ‘€ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>
            <div class="preview-tabs">
                <button onclick="showPreview('daily')" class="tab-btn active" id="daily-tab">æ˜¨æ—¥ã®çµæœ</button>
                <button onclick="showPreview('weekly')" class="tab-btn" id="weekly-tab">é€±é–“çµæœ</button>
            </div>

            <div id="daily-preview" class="preview-content">
                <div id="daily-stats" class="stats-display"></div>
                <div id="daily-results" class="results-display"></div>
            </div>

            <div id="weekly-preview" class="preview-content" style="display: none;">
                <div id="weekly-stats" class="stats-display"></div>
                <div id="weekly-results" class="results-display"></div>
            </div>
        </div>

        <!-- JSONã‚³ãƒ¼ãƒ‰ç”Ÿæˆ -->
        <div class="output-section">
            <h2>ğŸ’¾ ç”Ÿæˆã•ã‚ŒãŸJSONã‚³ãƒ¼ãƒ‰</h2>
            <p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ <code>standard-predictions.astro</code> ã®è©²å½“ç®‡æ‰€ã«ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ï¼š</p>
            <div class="code-output">
                <pre id="generatedCode">// è§£æå®Ÿè¡Œå¾Œã«ã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</pre>
                <button onclick="copyToClipboard()" class="copy-btn">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
            </div>
        </div>
    </div>

    <style>
        .admin-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: var(--body-text-color);
        }

        .admin-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(147, 51, 234, 0.1) 100%);
            border-radius: 16px;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .admin-header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .input-section {
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }

        .input-section h2 {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .input-group label {
            font-weight: 600;
            font-size: 1.1rem;
        }

        textarea {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 20px;
            color: var(--body-text-color);
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .parse-btn, .copy-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            align-self: flex-start;
        }

        .parse-btn:hover, .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }

        .preview-section {
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }

        .preview-section h2 {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .preview-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            background: rgba(148, 163, 184, 0.1);
            color: var(--body-text-color);
            border: 1px solid rgba(148, 163, 184, 0.2);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.3) 100%);
            color: #10b981;
            border-color: rgba(16, 185, 129, 0.3);
        }

        .stats-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: #10b981;
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--body-text-color);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .results-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 10px;
            max-width: 800px;
        }

        .race-result {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 8px;
            border-radius: 8px;
            font-size: 0.85rem;
        }

        .race-result.win {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.1) 100%);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .race-result.lose {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .race-number {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .race-icon {
            font-size: 1.2rem;
            margin-bottom: 3px;
        }

        .race-payout {
            font-weight: 700;
            font-size: 0.75rem;
        }

        .output-section {
            padding: 30px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            border: 1px solid rgba(148, 163, 184, 0.1);
        }

        .output-section h2 {
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .code-output {
            position: relative;
        }

        .code-output pre {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 8px;
            padding: 20px;
            color: #e2e8f0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            font-size: 0.85rem;
        }

        code {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary-color);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        @media (max-width: 768px) {
            .admin-container {
                padding: 15px;
            }

            .admin-header h1 {
                font-size: 2rem;
            }

            .stats-display {
                grid-template-columns: repeat(2, 1fr);
            }

            .results-display {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>

    <script is:inline>
        let dailyData = null;
        let weeklyData = null;

        // å…¨è§’ãƒ»åŠè§’æ•°å­—ã®æ­£è¦åŒ–
        function normalizeText(text) {
            return text
                .replace(/[ï¼-ï¼™]/g, (s) => String.fromCharCode(s.charCodeAt(0) - 0xFEE0))
                .replace(/[ï¼²ï½’]/g, 'R')
                .replace(/[ï¼Œã€]/g, ',')
                .replace(/[ï¼ã€‚]/g, '.')
                .replace(/\s+/g, ' ')
                .trim();
        }

        // é‡‘é¡æŠ½å‡ºï¼ˆ1.900å†† â†’ 1900ï¼‰
        function extractPayout(text) {
            const match = text.match(/([0-9,]+(?:\.[0-9]+)?)å††/);
            if (match) {
                return parseInt(match[1].replace(/[,\.]/g, ''));
            }
            return 0;
        }

        // ãƒ¬ãƒ¼ã‚¹ç•ªå·æŠ½å‡ºï¼ˆï¼‘ï¼² â†’ 1ï¼‰
        function extractRaceNumber(text) {
            const normalized = normalizeText(text);
            const match = normalized.match(/(\d+)R/);
            return match ? parseInt(match[1]) : null;
        }

        // æ—¥ä»˜æŠ½å‡ºï¼ˆï¼™/ï¼˜å·å´ç«¶é¦¬ â†’ 9/8ï¼‰
        function extractDate(text) {
            const normalized = normalizeText(text);
            const match = normalized.match(/(\d+)\/(\d+)/);
            if (match) {
                return `${parseInt(match[1])}/${parseInt(match[2])}`;
            }
            return null;
        }

        // ç«¶é¦¬å ´æŠ½å‡ºï¼ˆï¼™/ï¼˜å·å´ç«¶é¦¬ â†’ å·å´ç«¶é¦¬ï¼‰
        function extractTrack(text) {
            const match = text.match(/(å·å´|å¤§äº•|èˆ¹æ©‹|æµ¦å’Œ)ç«¶é¦¬/);
            return match ? match[1] + 'ç«¶é¦¬' : 'å·å´ç«¶é¦¬';
        }

        // æ˜¨æ—¥ãƒ‡ãƒ¼ã‚¿è§£æ
        function parseDailyData() {
            const input = document.getElementById('dailyData').value;
            if (!input.trim()) {
                alert('ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            const lines = input.split('\n').filter(line => line.trim());
            const headerLine = lines[0];

            const date = extractDate(headerLine);
            const track = extractTrack(headerLine);

            if (!date) {
                alert('æ—¥ä»˜ã‚’æ­£ã—ãèªè­˜ã§ãã¾ã›ã‚“ã§ã—ãŸ');
                return;
            }

            // 12ãƒ¬ãƒ¼ã‚¹åˆ†ã®çµæœã‚’åˆæœŸåŒ–
            const results = [];
            for (let i = 1; i <= 12; i++) {
                results.push({ race: `${i}R`, result: 'lose', payout: 0 });
            }

            let totalPayout = 0;
            let hitCount = 0;

            // çš„ä¸­ãƒ¬ãƒ¼ã‚¹ã‚’è§£æ
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i];
                const raceNum = extractRaceNumber(line);
                const payout = extractPayout(line);

                if (raceNum && raceNum >= 1 && raceNum <= 12 && line.includes('çš„ä¸­')) {
                    results[raceNum - 1] = {
                        race: `${raceNum}R`,
                        result: 'win',
                        payout: payout
                    };
                    totalPayout += payout;
                    hitCount++;
                }
            }

            const hitRate = ((hitCount / 12) * 100).toFixed(1);
            const purchaseAmount = 12 * 10 * 100; // 12ãƒ¬ãƒ¼ã‚¹ Ã— 10ç‚¹ Ã— 100å††
            const recoveryRate = Math.round((totalPayout / purchaseAmount) * 100);

            dailyData = {
                date: date,
                track: track,
                hitRate: parseFloat(hitRate),
                hitCount: hitCount,
                totalCount: 12,
                totalPayout: totalPayout,
                recoveryRate: recoveryRate,
                results: results
            };

            displayDailyPreview();
            generateCode();
        }

        // é€±é–“ãƒ‡ãƒ¼ã‚¿è§£æ
        function parseWeeklyData() {
            const input = document.getElementById('weeklyData').value;
            if (!input.trim()) {
                alert('é€±é–“ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            const sections = input.split(/(?=\d+\/\d+.*ç«¶é¦¬)/);
            const dailyResults = [];
            let totalHits = 0;
            let totalRaces = 0;
            let totalPayout = 0;
            let startDate = null;
            let endDate = null;
            let track = 'å·å´ç«¶é¦¬';

            for (const section of sections) {
                if (!section.trim()) continue;

                const lines = section.split('\n').filter(line => line.trim());
                const headerLine = lines[0];

                const date = extractDate(headerLine);
                track = extractTrack(headerLine);

                if (!date) continue;

                if (!startDate) startDate = date;
                endDate = date;

                // ãã®æ—¥ã®çµæœã‚’è§£æ
                const dayResults = [];
                for (let i = 1; i <= 12; i++) {
                    dayResults.push({ race: `${i}R`, result: 'lose', payout: 0 });
                }

                let dayHits = 0;
                let dayPayout = 0;

                for (let i = 1; i < lines.length; i++) {
                    const line = lines[i];
                    const raceNum = extractRaceNumber(line);
                    const payout = extractPayout(line);

                    if (raceNum && raceNum >= 1 && raceNum <= 12 && line.includes('çš„ä¸­')) {
                        dayResults[raceNum - 1] = {
                            race: `${raceNum}R`,
                            result: 'win',
                            payout: payout
                        };
                        dayPayout += payout;
                        dayHits++;
                    }
                }

                const dayHitRate = Math.round((dayHits / 12) * 100);
                dailyResults.push({
                    date: date.replace('/', ''),
                    hitRate: dayHitRate,
                    label: `${date} (${dayHitRate}%)`,
                    results: dayResults
                });

                totalHits += dayHits;
                totalRaces += 12;
                totalPayout += dayPayout;
            }

            const overallHitRate = ((totalHits / totalRaces) * 100).toFixed(1);
            const purchaseAmount = totalRaces * 10 * 100;
            const recoveryRate = Math.round((totalPayout / purchaseAmount) * 100);

            weeklyData = {
                period: `${startDate}ã€œ${endDate}`,
                track: track,
                hitRate: parseFloat(overallHitRate),
                hitCount: totalHits,
                totalCount: totalRaces,
                totalPayout: totalPayout,
                recoveryRate: recoveryRate,
                dailyTabs: dailyResults.map(day => ({
                    date: day.date,
                    hitRate: day.hitRate,
                    label: day.label
                })),
                dailyResultsData: dailyResults.reduce((acc, day) => {
                    acc[day.date] = day.results;
                    return acc;
                }, {})
            };

            displayWeeklyPreview();
            generateCode();
        }

        // æ˜¨æ—¥ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
        function displayDailyPreview() {
            if (!dailyData) return;

            const statsHtml = `
                <div class="stat-card">
                    <div class="stat-value">${dailyData.hitRate}%</div>
                    <div class="stat-label">çš„ä¸­ç‡ (${dailyData.hitCount}/${dailyData.totalCount})</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Â¥${dailyData.totalPayout.toLocaleString()}</div>
                    <div class="stat-label">é…å½“åˆè¨ˆ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${dailyData.recoveryRate}%</div>
                    <div class="stat-label">å›åç‡</div>
                </div>
            `;

            const resultsHtml = dailyData.results.map(result => `
                <div class="race-result ${result.result}">
                    <div class="race-number">${result.race}</div>
                    <div class="race-icon">${result.result === 'win' ? 'â­•' : 'âŒ'}</div>
                    ${result.result === 'win' ? `<div class="race-payout">Â¥${result.payout.toLocaleString()}</div>` : ''}
                </div>
            `).join('');

            document.getElementById('daily-stats').innerHTML = statsHtml;
            document.getElementById('daily-results').innerHTML = resultsHtml;
        }

        // é€±é–“ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
        function displayWeeklyPreview() {
            if (!weeklyData) return;

            const statsHtml = `
                <div class="stat-card">
                    <div class="stat-value">${weeklyData.hitRate}%</div>
                    <div class="stat-label">çš„ä¸­ç‡ (${weeklyData.hitCount}/${weeklyData.totalCount})</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Â¥${weeklyData.totalPayout.toLocaleString()}</div>
                    <div class="stat-label">é€±é–“é…å½“</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${weeklyData.recoveryRate}%</div>
                    <div class="stat-label">å›åç‡</div>
                </div>
            `;

            // æœ€åˆã®æ—¥ã®çµæœã‚’è¡¨ç¤º
            const firstDay = Object.keys(weeklyData.dailyResultsData)[0];
            const firstDayResults = weeklyData.dailyResultsData[firstDay] || [];

            const resultsHtml = firstDayResults.map(result => `
                <div class="race-result ${result.result}">
                    <div class="race-number">${result.race}</div>
                    <div class="race-icon">${result.result === 'win' ? 'â­•' : 'âŒ'}</div>
                    ${result.result === 'win' ? `<div class="race-payout">Â¥${result.payout.toLocaleString()}</div>` : ''}
                </div>
            `).join('');

            document.getElementById('weekly-stats').innerHTML = statsHtml;
            document.getElementById('weekly-results').innerHTML = resultsHtml;
        }

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function showPreview(type) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.preview-content').forEach(content => content.style.display = 'none');

            document.getElementById(`${type}-tab`).classList.add('active');
            document.getElementById(`${type}-preview`).style.display = 'block';
        }

        // JSONã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
        function generateCode() {
            let code = '';

            if (dailyData) {
                code += `// æ˜¨æ—¥ã®çš„ä¸­çµæœãƒ‡ãƒ¼ã‚¿ï¼ˆ${dailyData.date} ${dailyData.track}ï¼‰\n`;
                code += `export const yesterdayResults = {\n`;
                code += `    date: "${dailyData.date}",\n`;
                code += `    track: "${dailyData.track}",\n`;
                code += `    hitRate: ${dailyData.hitRate},\n`;
                code += `    hitCount: ${dailyData.hitCount},\n`;
                code += `    totalCount: ${dailyData.totalCount},\n`;
                code += `    totalPayout: ${dailyData.totalPayout}\n`;
                code += `};\n\n`;
            }

            if (weeklyData) {
                code += `// é€±é–“ã®çš„ä¸­çµæœãƒ‡ãƒ¼ã‚¿ï¼ˆ${weeklyData.period} ${weeklyData.track}ï¼‰\n`;
                code += `export const weeklyResults = {\n`;
                code += `    period: "${weeklyData.period}",\n`;
                code += `    track: "${weeklyData.track}",\n`;
                code += `    hitRate: ${weeklyData.hitRate},\n`;
                code += `    hitCount: ${weeklyData.hitCount},\n`;
                code += `    totalCount: ${weeklyData.totalCount},\n`;
                code += `    totalPayout: ${weeklyData.totalPayout},\n`;
                code += `    recoveryRate: ${weeklyData.recoveryRate}\n`;
                code += `};\n\n`;

                code += `export const dailyTabs = [\n`;
                weeklyData.dailyTabs.forEach(tab => {
                    code += `    { date: '${tab.date}', hitRate: ${tab.hitRate}, label: '${tab.label}' },\n`;
                });
                code += `];\n\n`;

                code += `export const dailyResultsData = {\n`;
                Object.entries(weeklyData.dailyResultsData).forEach(([date, results]) => {
                    code += `    '${date}': [\n`;
                    results.forEach(result => {
                        code += `        { race: '${result.race}', result: '${result.result}', payout: ${result.payout} },\n`;
                    });
                    code += `    ],\n`;
                });
                code += `};\n`;
            }

            if (!code) {
                code = '// è§£æå®Ÿè¡Œå¾Œã«ã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™';
            }

            document.getElementById('generatedCode').textContent = code;
        }

        // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        async function copyToClipboard() {
            const code = document.getElementById('generatedCode').textContent;
            if (code && code !== '// è§£æå®Ÿè¡Œå¾Œã«ã‚³ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™') {
                try {
                    await navigator.clipboard.writeText(code);
                    alert('ã‚³ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
                } catch (err) {
                    console.error('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ:', err);
                    alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
                }
            } else {
                alert('ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšè§£æã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚');
            }
        }
    </script>
</BaseLayout>