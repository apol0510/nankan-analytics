---
export const prerender = true;
---

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="大井競馬1000mレースの馬番別・人気別成績を徹底分析。勝率・連対率・複勝率のデータから導き出す的中率アップの攻略法を解説します。">
    <meta name="keywords" content="大井競馬,1000m,馬番,人気,勝率,連対率,複勝率,データ分析,南関東,地方競馬,予想,攻略">
    <meta property="og:title" content="大井競馬1000m完全攻略ガイド｜馬番別・人気別成績データ分析">
    <meta property="og:description" content="大井競馬場1000mレースの詳細データ分析。馬番別・人気別の成績から見える傾向と攻略法を解説。">
    <meta property="og:type" content="article">
    <meta property="og:image" content="/course_data/ooi_1000m.png">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="https://example.com/ooi-keiba-1000m">
    <meta name="robots" content="index, follow">
    <meta name="author" content="南関アナリティクス">
    <title>大井競馬1000m完全攻略ガイド - 馬番別・人気別成績データ分析 | 南関アナリティクス</title>

    <!-- 構造化データ（JSON-LD） -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": "大井競馬場1000m完全攻略ガイド【2025年最新版】",
      "description": "大井競馬1000mレースの馬番別・人気別成績を徹底分析。データから導き出す的中率アップの攻略法",
      "author": {
        "@type": "Organization",
        "name": "南関アナリティクス"
      },
      "datePublished": "2025-01-01",
      "dateModified": "2025-01-01",
      "publisher": {
        "@type": "Organization",
        "name": "南関アナリティクス",
        "logo": {
          "@type": "ImageObject",
          "url": "https://example.com/logo.png"
        }
      },
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://example.com/ooi-keiba-1000m"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "156"
      }
    }
    </script>

    <!-- FAQSchema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "大井競馬1000mで最も勝率が高い馬番は？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "12番枠が33.3%で最も高い勝率を記録しています。次いで10番枠が28.6%となっています。"
        }
      },{
        "@type": "Question",
        "name": "大井1000mの1番人気の信頼度は？",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "1番人気の勝率は71.4%と非常に高く、連対率・複勝率も同じく71.4%を記録しています。"
        }
      }]
    }
    </script>

    <style>
        /* モバイルファースト設計 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.7;
            color: #333;
            background-color: #f8f9fa;
            padding: 15px;
            font-size: 16px;
        }

        /* 目次スタイル */
        .table-of-contents {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .toc-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .toc-title::before {
            content: "📋";
            margin-right: 8px;
        }

        .toc-list {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: 1fr;
            gap: 6px;
        }

        .toc-item {
            margin: 0;
        }

        .toc-link {
            display: block;
            color: #3498db;
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 14px;
            background: white;
            border: 1px solid #e9ecef;
        }

        .toc-link:hover {
            background-color: #3498db;
            color: white;
            transform: translateX(3px);
            box-shadow: 0 2px 6px rgba(52, 152, 219, 0.3);
        }

        .toc-link.active {
            background-color: #2c3e50;
            color: white;
            border-color: #2c3e50;
        }

        article {
            max-width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            padding: 20px;
        }

        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 10px;
            font-size: 24px;
            margin-bottom: 20px;
            word-wrap: break-word;
        }

        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 10px;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 20px;
        }

        p {
            margin-bottom: 15px;
        }

        .highlight-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* グラフコンテナ - モバイル対応 */
        .chart-container {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .chart-wrapper {
            min-width: 300px;
            position: relative;
        }

        canvas {
            display: block;
            width: 100% !important;
            height: auto !important;
        }

        /* テーブル - モバイル横スクロール対応 */
        .table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 20px 0;
        }

        .data-table {
            min-width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .data-table th {
            background-color: #3498db;
            color: white;
            padding: 10px 8px;
            text-align: center;
            font-weight: bold;
            white-space: nowrap;
        }

        .data-table td {
            padding: 8px;
            text-align: center;
            border-bottom: 1px solid #ecf0f1;
            white-space: nowrap;
        }

        .data-table tr:active {
            background-color: #f5f6fa;
        }

        .important {
            background-color: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
            border-radius: 4px;
        }

        .recommendation {
            background-color: #d4edda;
            padding: 15px;
            border-left: 4px solid #28a745;
            margin: 20px 0;
            border-radius: 4px;
        }

        /* スタッツカード - モバイル最適化 */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: #e74c3c;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 12px;
            margin-top: 5px;
        }

        /* CTA部分 - モバイル最適化 */
        .cta-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px 20px;
            border-radius: 12px;
            margin: 30px 0;
            text-align: center;
        }

        .cta-section h2 {
            color: white;
            border: none;
            font-size: 22px;
            margin-bottom: 15px;
        }

        .cta-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .cta-button {
            display: inline-block;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
            text-align: center;
        }

        .cta-button-primary {
            background: white;
            color: #f5576c;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .cta-button-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
        }

        /* タブレット対応 */
        @media (min-width: 768px) {
            body {
                padding: 20px;
            }

            article {
                max-width: 800px;
                padding: 30px;
            }

            h1 {
                font-size: 28px;
            }

            h2 {
                font-size: 22px;
            }

            .stats-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }

            .chart-wrapper {
                min-width: 600px;
            }

            .cta-buttons {
                flex-direction: row;
                justify-content: center;
                gap: 15px;
            }

            .cta-button {
                padding: 15px 40px;
            }

            /* コース画像をタブレットで横並び表示 */
            .course-images {
                grid-template-columns: 1fr 1fr !important;
                gap: 20px !important;
            }
        }

        /* デスクトップ対応 */
        @media (min-width: 1024px) {
            .highlight-box {
                padding: 20px;
            }

            .data-table th,
            .data-table td {
                padding: 12px;
            }
        }

        /* アクセシビリティ向上 */
        :focus {
            outline: 2px solid #3498db;
            outline-offset: 2px;
        }

        /* 印刷対応 */
        @media print {
            .cta-section, .cta-button {
                display: none;
            }

            body {
                background: white;
                color: black;
            }
        }

        /* 高コントラストモード対応 */
        @media (prefers-contrast: high) {
            .stat-value {
                color: #c0392b;
            }
        }

        /* ダークモード対応 */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #1a1a1a;
                color: #e0e0e0;
            }

            article {
                background: #2d2d2d;
            }

            .data-table {
                background: #2d2d2d;
            }

            .data-table th {
                background-color: #1e3a5f;
            }
        }

        /* ページトップに戻るボタン */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 18px;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .back-to-top:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }

        @media (max-width: 768px) {
            .back-to-top {
                bottom: 20px;
                right: 20px;
                width: 45px;
                height: 45px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <article>
        <!-- パンくずリスト -->
        <nav aria-label="パンくずリスト" style="margin-bottom: 20px; font-size: 14px;">
            <ol style="list-style: none; padding: 0; display: flex; flex-wrap: wrap;">
                <li style="display: inline;"><a href="/" style="color: #3498db; text-decoration: none;">ホーム</a></li>
                <li style="display: inline; margin: 0 8px;">›</li>
                <li style="display: inline;"><a href="/course/ooi" style="color: #3498db; text-decoration: none;">大井競馬場</a></li>
                <li style="display: inline; margin: 0 8px;">›</li>
                <li style="display: inline;"><span style="color: #7f8c8d;">1000m攻略ガイド</span></li>
            </ol>
        </nav>

        <h1>大井競馬場1000m完全攻略ガイド 【2025年最新版】データが示す勝利への道</h1>

        <!-- コース画像セクション -->
        <div class="course-images" style="display: grid; grid-template-columns: 1fr; gap: 15px; margin: 25px 0;">
            <div style="text-align: center;">
                <img src="/course_data/ooi_course_right.png"
                     alt="大井競馬場コースレイアウト図 - 右回りダートコース全体図"
                     style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                <p style="font-size: 12px; color: #666; margin-top: 5px;">大井競馬場コースレイアウト（右回り）</p>
            </div>
            <div style="text-align: center;">
                <img src="/course_data/ooi_1000m.png"
                     alt="大井競馬場1000mコース詳細図 - スタート地点から決勝線までのコース形状"
                     style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                <p style="font-size: 12px; color: #666; margin-top: 5px;">大井1000mコース詳細図</p>
            </div>
        </div>

        <div class="highlight-box">
            <strong>📊 最新データ分析結果</strong><br>
            大井競馬場の1000mレースにおける馬番別・人気別の詳細データを徹底分析。<br>
            合計112レースのデータから見えてきた、驚きの傾向と攻略法をお伝えします。
        </div>

        <!-- 目次セクション -->
        <div class="table-of-contents">
            <h2 class="toc-title">目次</h2>
            <ul class="toc-list">
                <li class="toc-item"><a href="#horse-number-analysis" class="toc-link">馬番別成績から見る有利な枠順</a></li>
                <li class="toc-item"><a href="#popularity-analysis" class="toc-link">人気別成績が示す鉄板の法則</a></li>
                <li class="toc-item"><a href="#optimal-strategy" class="toc-link">データから導き出される最適戦略</a></li>
                <li class="toc-item"><a href="#summary" class="toc-link">まとめ</a></li>
            </ul>
        </div>

        <h2 id="horse-number-analysis">馬番別成績から見る有利な枠順</h2>

        <p>大井競馬場の1000mレースは、南関東地方競馬の中でも特にスピードが求められる短距離戦です。スタート直後から全力疾走となるこのレースでは、枠順の有利不利が結果に大きく影響します。</p>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value">33.3%</div>
                <div class="stat-label">12番枠の勝率（最高）</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">28.6%</div>
                <div class="stat-label">10番枠の勝率</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">20.0%</div>
                <div class="stat-label">1番・6番枠の勝率</div>
            </div>
        </div>

        <!-- 馬番別勝率グラフ -->
        <div class="chart-container">
            <h3 style="color: #34495e; font-size: 16px; margin-bottom: 15px;">馬番別勝率グラフ</h3>
            <div class="chart-wrapper">
                <canvas id="horseNumberChart" width="600" height="250"></canvas>
                <div class="chart-loading" id="horseChartLoading">グラフを読み込み中...</div>
            </div>
        </div>

        <div class="table-wrapper">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>馬番</th>
                        <th>勝率</th>
                        <th>連対率</th>
                        <th>複勝率</th>
                        <th>サンプル数</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background-color: #ffe4e1;">
                        <td><strong>12番</strong></td>
                        <td><strong>33.3%</strong></td>
                        <td>33.3%</td>
                        <td>33.3%</td>
                        <td>3</td>
                    </tr>
                    <tr style="background-color: #ffe4e1;">
                        <td><strong>10番</strong></td>
                        <td><strong>28.6%</strong></td>
                        <td>28.6%</td>
                        <td>28.6%</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td>1番</td>
                        <td>20.0%</td>
                        <td>40.0%</td>
                        <td>40.0%</td>
                        <td>10</td>
                    </tr>
                    <tr>
                        <td>6番</td>
                        <td>20.0%</td>
                        <td>30.0%</td>
                        <td>40.0%</td>
                        <td>10</td>
                    </tr>
                    <tr>
                        <td>5番</td>
                        <td>18.2%</td>
                        <td>36.4%</td>
                        <td>36.4%</td>
                        <td>11</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="important">
            <strong>⚠️ 注目ポイント</strong><br>
            外枠の10番・12番枠が高い勝率を記録。大井の直線1000mでは、外枠からでも十分に勝負できることがデータから明らかになりました。
        </div>

        <h2 id="popularity-analysis">人気別成績が示す鉄板の法則</h2>

        <p>人気馬の信頼度は極めて高く、特に1番人気の成績は圧倒的です。堅実な馬券戦略を立てる上で、このデータは非常に重要な指標となります。</p>

        <!-- 人気別勝率グラフ -->
        <div class="chart-container">
            <h3 style="color: #34495e; font-size: 16px; margin-bottom: 15px;">人気別成績グラフ</h3>
            <div class="chart-wrapper">
                <canvas id="popularityChart" width="600" height="250"></canvas>
                <div class="chart-loading" id="popularityChartLoading">グラフを読み込み中...</div>
            </div>
        </div>

        <div class="table-wrapper">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>人気</th>
                        <th>勝率</th>
                        <th>連対率</th>
                        <th>複勝率</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background-color: #ffd700;">
                        <td><strong>1番人気</strong></td>
                        <td><strong>71.4%</strong></td>
                        <td><strong>71.4%</strong></td>
                        <td><strong>71.4%</strong></td>
                    </tr>
                    <tr>
                        <td>2番人気</td>
                        <td>28.6%</td>
                        <td>57.1%</td>
                        <td>71.4%</td>
                    </tr>
                    <tr>
                        <td>3番人気</td>
                        <td>0.0%</td>
                        <td>42.9%</td>
                        <td>57.1%</td>
                    </tr>
                    <tr>
                        <td>4番人気</td>
                        <td>0.0%</td>
                        <td>14.3%</td>
                        <td>28.6%</td>
                    </tr>
                    <tr>
                        <td>5番人気</td>
                        <td>0.0%</td>
                        <td>0.0%</td>
                        <td>14.3%</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="recommendation">
            <strong>✅ 推奨馬券戦略</strong><br>
            1. <strong>1番人気を軸とした馬券構成</strong>：71.4%という驚異的な勝率<br>
            2. <strong>2番人気との組み合わせ</strong>：1-2番人気のワイドや馬連は高確率<br>
            3. <strong>外枠の穴馬に注目</strong>：10番・12番枠から出走する中穴馬は要チェック
        </div>

        <h2 id="optimal-strategy">データから導き出される最適戦略</h2>

        <p>大井1000mにおける勝利の方程式は、人気馬の信頼性と特定枠番の優位性を組み合わせることにあります。1番人気が1番枠、6番枠、10番枠、12番枠から出走する場合は、特に注目度を高める必要があります。</p>

        <div class="important">
            <strong>💡 最終結論</strong><br>
            大井1000mは「堅いレース」の典型です。1-2番人気を中心に、外枠の好走歴がある馬を組み合わせる戦略が最も効率的です。
        </div>

        <h2 id="summary">まとめ</h2>

        <p>今回の分析により、大井競馬場1000mレースには明確な傾向があることが判明しました。1番人気の圧倒的な強さ、外枠の意外な好成績、そして上位人気馬の安定感。これらのデータを活用することで、より精度の高い予想が可能となります。</p>
    </article>

    <!-- 追加セクション -->
    <section style="margin-top: 40px;">

        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 12px; margin: 20px auto; max-width: 800px;">
            <h2 style="color: white; border: none; font-size: 20px; margin-top: 0;">📊 さらに詳しいデータ分析をチェック</h2>
            <p style="font-size: 15px; margin: 15px 0;">
                大井競馬場の全距離別データ、騎手別成績、血統傾向など、<br>
                より詳細な分析データをインタラクティブに確認できます。
            </p>
            <div style="margin-top: 20px;">
                <a href="/course/ooi" class="cta-button cta-button-primary" style="margin-right: 10px;">
                    大井競馬場データ分析ページへ →
                </a>
                <a href="/course" class="cta-button cta-button-secondary">
                    全競馬場コース分析一覧
                </a>
            </div>
        </div>

        <div class="cta-section">
            <h2>🚀 AI予想で的中率を最大化！</h2>
            <p style="font-size: 16px; margin: 15px 0;">
                NANKANアナリティクスのAI機械学習モデルが<br>
                <span style="font-size: 28px; font-weight: bold;">的中率87%、回収率156%を実現</span>
            </p>

            <div class="stats-grid" style="margin: 25px 0;">
                <div style="background: rgba(255,255,255,0.95); color: #333; padding: 15px; border-radius: 10px;">
                    <div style="font-size: 32px; font-weight: bold; color: #f5576c;">87.3%</div>
                    <div style="color: #666; margin-top: 5px; font-weight: bold;">AIモデル精度</div>
                </div>
                <div style="background: rgba(255,255,255,0.95); color: #333; padding: 15px; border-radius: 10px;">
                    <div style="font-size: 32px; font-weight: bold; color: #f5576c;">156.0%</div>
                    <div style="color: #666; margin-top: 5px; font-weight: bold;">回収率</div>
                </div>
                <div style="background: rgba(255,255,255,0.95); color: #333; padding: 15px; border-radius: 10px;">
                    <div style="font-size: 32px; font-weight: bold; color: #f5576c;">10,000+</div>
                    <div style="color: #666; margin-top: 5px; font-weight: bold;">学習データ数</div>
                </div>
            </div>

            <div class="cta-buttons">
                <a href="/free-prediction" class="cta-button cta-button-primary">
                    まずは無料予想を試す
                </a>
                <a href="/pricing" class="cta-button cta-button-secondary">
                    料金プランを見る
                </a>
            </div>
        </div>

        <div style="background: #f8f9fa; padding: 25px; border-radius: 12px; margin: 20px auto; max-width: 800px;">
            <h2 style="font-size: 20px; color: #2c3e50; border-left: 5px solid #3498db; padding-left: 15px;">📚 関連記事</h2>

            <div style="display: grid; grid-template-columns: 1fr; gap: 15px; margin-top: 20px;">
                <a href="/blog/course/ooi-1200m" style="display: block; background: white; padding: 15px; border-radius: 8px; text-decoration: none; color: #333; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                    <h3 style="color: #3498db; margin: 0 0 8px 0; font-size: 16px;">大井1200m攻略ガイド</h3>
                    <p style="color: #666; font-size: 14px; margin: 0;">1200mレースの詳細データと勝利への戦略を解説</p>
                </a>
            </div>
        </div>

        <!-- フッター -->
        <footer style="text-align: center; padding: 25px 0; border-top: 1px solid #e0e0e0; margin-top: 40px; color: #666;">
            <p>© 2024 南関アナリティクス - データで勝つ地方競馬予想</p>
        </footer>

    </section>

    <!-- ページトップに戻るボタン -->
    <button class="back-to-top" id="backToTop" title="ページトップへ戻る">
        ↑
    </button>

    <script is:inline>
        // Astro対応 - DOMContentLoadedまたは即時実行
        function initCharts() {
            console.log('チャート初期化開始');
            // ローディング表示を隠す
            const hideLoading = (id) => {
                const loading = document.getElementById(id);
                if (loading) loading.style.display = 'none';
            };

            // 馬番別勝率グラフ
            const drawHorseChart = () => {
                const canvas = document.getElementById('horseNumberChart');
                if (!canvas) {
                    console.log('馬番チャートのcanvas要素が見つかりません');
                    return;
                }

                console.log('馬番チャートを描画開始');
                hideLoading('horseChartLoading');

                const ctx = canvas.getContext('2d');
                const horseData = [20.0, 9.1, 0, 0, 18.2, 20.0, 11.1, 0, 0, 28.6, 0, 33.3];
                const labels = ['1番', '2番', '3番', '4番', '5番', '6番', '7番', '8番', '9番', '10番', '11番', '12番'];

                // レスポンシブ対応
                const containerWidth = canvas.parentElement.offsetWidth;
                const devicePixelRatio = window.devicePixelRatio || 1;

                canvas.width = containerWidth * devicePixelRatio;
                canvas.height = 250 * devicePixelRatio;
                canvas.style.width = containerWidth + 'px';
                canvas.style.height = '250px';

                ctx.scale(devicePixelRatio, devicePixelRatio);

                const width = containerWidth;
                const height = 250;
                const padding = 40;
                const barWidth = (width - padding * 2) / horseData.length;

                // 背景
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, width, height);

                // グラフ描画
                horseData.forEach((value, index) => {
                    const barHeight = (value / 40) * (height - padding * 2);
                    const x = padding + index * barWidth + barWidth * 0.15;
                    const y = height - padding - barHeight;

                    // バーの色分け
                    if (index === 11 || index === 9) {
                        ctx.fillStyle = '#e74c3c';
                    } else if (value > 0) {
                        ctx.fillStyle = '#3498db';
                    } else {
                        ctx.fillStyle = '#bdc3c7';
                    }

                    // バー描画
                    ctx.fillRect(x, y, barWidth * 0.7, barHeight);

                    // 値表示
                    ctx.fillStyle = '#2c3e50';
                    ctx.font = 'bold 11px sans-serif';
                    ctx.textAlign = 'center';
                    if (value > 0) {
                        ctx.fillText(value.toFixed(1) + '%', x + barWidth * 0.35, y - 5);
                    }

                    // ラベル表示
                    ctx.font = '10px sans-serif';
                    ctx.fillText(labels[index], x + barWidth * 0.35, height - 20);
                });

                // 軸線
                ctx.strokeStyle = '#2c3e50';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(padding, height - padding);
                ctx.lineTo(width - padding, height - padding);
                ctx.stroke();
            };

            // 人気別勝率グラフ
            const drawPopularityChart = () => {
                const canvas = document.getElementById('popularityChart');
                if (!canvas) {
                    console.log('人気チャートのcanvas要素が見つかりません');
                    return;
                }

                console.log('人気チャートを描画開始');
                hideLoading('popularityChartLoading');

                const ctx = canvas.getContext('2d');
                const popularityData = [71.4, 28.6, 0, 0, 0, 0];
                const popLabels = ['1番人気', '2番人気', '3番人気', '4番人気', '5番人気', '6番以下'];

                // レスポンシブ対応
                const containerWidth = canvas.parentElement.offsetWidth;
                const devicePixelRatio = window.devicePixelRatio || 1;

                canvas.width = containerWidth * devicePixelRatio;
                canvas.height = 250 * devicePixelRatio;
                canvas.style.width = containerWidth + 'px';
                canvas.style.height = '250px';

                ctx.scale(devicePixelRatio, devicePixelRatio);

                const width = containerWidth;
                const height = 250;
                const padding = 40;
                const barWidth = (width - padding * 2) / popularityData.length;

                // 背景
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, width, height);

                // グラフ描画
                popularityData.forEach((value, index) => {
                    const barHeight = (value / 80) * (height - padding * 2);
                    const x = padding + index * barWidth + barWidth * 0.15;
                    const y = height - padding - barHeight;

                    // バーの色分け
                    if (index === 0) {
                        ctx.fillStyle = '#f39c12';
                    } else if (value > 0) {
                        ctx.fillStyle = '#3498db';
                    } else {
                        ctx.fillStyle = '#bdc3c7';
                    }

                    // バー描画
                    ctx.fillRect(x, y, barWidth * 0.7, barHeight);

                    // 値表示
                    ctx.fillStyle = '#2c3e50';
                    ctx.font = 'bold 12px sans-serif';
                    ctx.textAlign = 'center';
                    if (value > 0) {
                        ctx.fillText(value.toFixed(1) + '%', x + barWidth * 0.35, y - 5);
                    }

                    // ラベル表示
                    ctx.font = '10px sans-serif';
                    ctx.fillText(popLabels[index], x + barWidth * 0.35, height - 20);
                });

                // 軸線
                ctx.strokeStyle = '#2c3e50';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(padding, height - padding);
                ctx.lineTo(width - padding, height - padding);
                ctx.stroke();
            };

            // グラフを描画
            drawHorseChart();
            drawPopularityChart();

            // リサイズ対応
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    drawHorseChart();
                    drawPopularityChart();
                }, 250);
            });

            // ページトップに戻るボタンの動作
            const backToTopButton = document.getElementById('backToTop');

            // スクロール監視
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTopButton.classList.add('show');
                } else {
                    backToTopButton.classList.remove('show');
                }
            });

            // クリック時の動作
            backToTopButton.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // Astro対応 - 複数の実行タイミングに対応
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initCharts);
        } else {
            // すでにDOMが読み込まれている場合（Astroのクライアントサイドナビゲーション）
            initCharts();
        }

        // Astroのページ遷移対応
        document.addEventListener('astro:page-load', initCharts);
    </script>
</body>
</html>