---
// å®Œå…¨ãƒ¢ãƒƒã‚¯æ±ºæ¸ˆãƒ•ãƒ­ãƒ¼ - Stripeã‚’ä½¿ã‚ãšã«å…¨ãƒ•ãƒ­ãƒ¼ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
export const prerender = false;

let currentStep = 'select'; // select, checkout, success
let selectedPlan = null;
let showDashboard = false;

if (Astro.request.method === 'POST') {
    const formData = await Astro.request.formData();
    const action = formData.get('action');
    
    if (action === 'selectPlan') {
        selectedPlan = formData.get('plan');
        currentStep = 'checkout';
    } else if (action === 'processPayment') {
        selectedPlan = formData.get('plan');
        currentStep = 'success';
        
        // LocalStorageã«ä¿å­˜ã™ã‚‹ãŸã‚ã®ãƒ•ãƒ©ã‚°
        if (typeof window !== 'undefined') {
            const mockSubscription = {
                planType: selectedPlan,
                status: 'active',
                createdAt: new Date().toISOString()
            };
            localStorage.setItem('mock_subscription', JSON.stringify(mockSubscription));
        }
    } else if (action === 'goToDashboard') {
        selectedPlan = formData.get('plan');
        showDashboard = true;
    } else if (action === 'cancel') {
        currentStep = 'select';
        selectedPlan = null;
    }
}
---

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Œå…¨æ±ºæ¸ˆãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ | NANKANã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(30, 41, 59, 0.8);
            border-radius: 16px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .header h1 {
            color: #3b82f6;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            padding: 20px;
            background: rgba(30, 41, 59, 0.6);
            border-radius: 12px;
        }

        .progress-step {
            flex: 1;
            text-align: center;
            padding: 10px;
            position: relative;
        }

        .progress-step.active {
            color: #3b82f6;
            font-weight: 600;
        }

        .progress-step.completed {
            color: #10b981;
        }

        .progress-step::after {
            content: 'â†’';
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            color: #475569;
        }

        .progress-step:last-child::after {
            display: none;
        }

        /* ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ©ãƒ³é¸æŠ */
        .plan-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .plan-card {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid rgba(59, 130, 246, 0.2);
            text-align: center;
        }

        .plan-card h2 {
            color: #3b82f6;
            margin-bottom: 15px;
        }

        .plan-price {
            font-size: 2rem;
            font-weight: 700;
            color: #10b981;
            margin: 15px 0;
        }

        .plan-features {
            list-style: none;
            margin: 20px 0;
            text-align: left;
        }

        .plan-features li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }

        .plan-features li::before {
            content: 'âœ“ ';
            color: #10b981;
            font-weight: bold;
        }

        /* ã‚¹ãƒ†ãƒƒãƒ—2: ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ */
        .checkout-form {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 16px;
            padding: 30px;
            max-width: 600px;
            margin: 0 auto;
        }

        .checkout-form h2 {
            color: #3b82f6;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #94a3b8;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            color: #e2e8f0;
            font-size: 1rem;
        }

        .test-card-info {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .test-card-info h4 {
            color: #10b981;
            margin-bottom: 10px;
        }

        /* ã‚¹ãƒ†ãƒƒãƒ—3: æˆåŠŸãƒšãƒ¼ã‚¸ */
        .success-container {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
            border: 2px solid rgba(16, 185, 129, 0.3);
        }

        .success-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .success-title {
            color: #10b981;
            font-size: 2rem;
            margin-bottom: 15px;
        }

        /* ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ */
        .dashboard-preview {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 16px;
            padding: 30px;
            margin-top: 30px;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        .membership-badge {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
        }

        .membership-badge.premium {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .dashboard-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .dashboard-card {
            background: rgba(15, 23, 42, 0.6);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .dashboard-card h3 {
            color: #3b82f6;
            margin-bottom: 15px;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .btn-cancel {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .btn-secondary {
            background: rgba(107, 114, 128, 0.2);
            border: 1px solid rgba(107, 114, 128, 0.4);
        }

        .status-message {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }

        .status-message.info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #3b82f6;
        }

        @media (max-width: 768px) {
            .plan-selection {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ å®Œå…¨æ±ºæ¸ˆãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ</h1>
            <p>Stripeã‚’ä½¿ã‚ãªã„å®Œå…¨ãƒ¢ãƒƒã‚¯ç’°å¢ƒã§å…¨ãƒ•ãƒ­ãƒ¼ã‚’ä½“é¨“</p>
        </div>

        <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
        <div class="progress-bar">
            <div class={`progress-step ${currentStep === 'select' ? 'active' : ''} ${currentStep !== 'select' ? 'completed' : ''}`}>
                1. ãƒ—ãƒ©ãƒ³é¸æŠ
            </div>
            <div class={`progress-step ${currentStep === 'checkout' ? 'active' : ''} ${currentStep === 'success' || showDashboard ? 'completed' : ''}`}>
                2. æ±ºæ¸ˆæƒ…å ±å…¥åŠ›
            </div>
            <div class={`progress-step ${currentStep === 'success' ? 'active' : ''} ${showDashboard ? 'completed' : ''}`}>
                3. æ±ºæ¸ˆå®Œäº†
            </div>
            <div class={`progress-step ${showDashboard ? 'active' : ''}`}>
                4. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
            </div>
        </div>

        {/* ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ©ãƒ³é¸æŠ */}
        {currentStep === 'select' && !showDashboard && (
            <div>
                <div class="status-message info">
                    <strong>ã‚¹ãƒ†ãƒƒãƒ— 1:</strong> ã¾ãšæ–™é‡‘ãƒ—ãƒ©ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„
                </div>

                <div class="plan-selection">
                    <!-- Standard Plan -->
                    <div class="plan-card">
                        <h2>ğŸ“š ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ãƒ—ãƒ©ãƒ³</h2>
                        <div class="plan-price">Â¥5,980/æœˆ</div>
                        <ul class="plan-features">
                            <li>10Rãƒ»11Rãƒ»12Räºˆæƒ³é–²è¦§</li>
                            <li>åŸºç¤ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¢ã‚¯ã‚»ã‚¹</li>
                            <li>ãƒ¡ãƒ¼ãƒ«ã‚µãƒãƒ¼ãƒˆ</li>
                            <li>éå»30æ—¥åˆ†ã®ãƒ‡ãƒ¼ã‚¿</li>
                        </ul>
                        <form method="POST">
                            <input type="hidden" name="action" value="selectPlan">
                            <input type="hidden" name="plan" value="standard">
                            <button type="submit" class="btn">ã“ã®ãƒ—ãƒ©ãƒ³ã‚’é¸æŠ</button>
                        </form>
                    </div>

                    <!-- Premium Plan -->
                    <div class="plan-card">
                        <h2>ğŸ‘‘ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³</h2>
                        <div class="plan-price">Â¥9,980/æœˆ</div>
                        <ul class="plan-features">
                            <li>1R-12R å…¨ãƒ¬ãƒ¼ã‚¹äºˆæƒ³é–²è¦§</li>
                            <li>å…¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¢ã‚¯ã‚»ã‚¹</li>
                            <li>ç„¡åˆ¶é™ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹</li>
                            <li>å„ªå…ˆã‚µãƒãƒ¼ãƒˆ</li>
                            <li>AIåˆ†æãƒ¬ãƒãƒ¼ãƒˆ</li>
                        </ul>
                        <form method="POST">
                            <input type="hidden" name="action" value="selectPlan">
                            <input type="hidden" name="plan" value="premium">
                            <button type="submit" class="btn">ã“ã®ãƒ—ãƒ©ãƒ³ã‚’é¸æŠ</button>
                        </form>
                    </div>
                </div>
            </div>
        )}

        {/* ã‚¹ãƒ†ãƒƒãƒ—2: ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ */}
        {currentStep === 'checkout' && !showDashboard && (
            <div class="checkout-form">
                <h2>ğŸ’³ æ±ºæ¸ˆæƒ…å ±ã®å…¥åŠ›</h2>
                
                <div class="status-message info">
                    <strong>é¸æŠãƒ—ãƒ©ãƒ³:</strong> {selectedPlan === 'premium' ? 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ' : 'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰'}ãƒ—ãƒ©ãƒ³
                </div>

                <div class="test-card-info">
                    <h4>ğŸ§ª ãƒ†ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±</h4>
                    <p>ã‚«ãƒ¼ãƒ‰ç•ªå·: 4242 4242 4242 4242</p>
                    <p>æœ‰åŠ¹æœŸé™: 12/34</p>
                    <p>CVC: 123</p>
                    <p style="color: #64748b; font-size: 0.9rem; margin-top: 8px;">
                        â€» ã“ã‚Œã¯ãƒ¢ãƒƒã‚¯ãªã®ã§å®Ÿéš›ã®èª²é‡‘ã¯ç™ºç”Ÿã—ã¾ã›ã‚“
                    </p>
                </div>

                <form>
                    <div class="form-group">
                        <label>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                        <input type="email" value="test@example.com" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label>ã‚«ãƒ¼ãƒ‰ç•ªå·</label>
                        <input type="text" value="4242 4242 4242 4242" readonly>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label>æœ‰åŠ¹æœŸé™</label>
                            <input type="text" value="12/34" readonly>
                        </div>
                        <div class="form-group">
                            <label>CVC</label>
                            <input type="text" value="123" readonly>
                        </div>
                    </div>
                </form>

                <div style="text-align: center; margin-top: 30px;">
                    <form method="POST" style="display: inline-block;">
                        <input type="hidden" name="action" value="processPayment">
                        <input type="hidden" name="plan" value={selectedPlan}>
                        <button type="submit" class="btn btn-success">æ±ºæ¸ˆã‚’å®Œäº†ã™ã‚‹</button>
                    </form>
                    
                    <form method="POST" style="display: inline-block;">
                        <input type="hidden" name="action" value="cancel">
                        <button type="submit" class="btn btn-secondary">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    </form>
                </div>
            </div>
        )}

        {/* ã‚¹ãƒ†ãƒƒãƒ—3: æˆåŠŸãƒšãƒ¼ã‚¸ */}
        {currentStep === 'success' && !showDashboard && (
            <div class="success-container">
                <div class="success-icon">ğŸ‰</div>
                <h1 class="success-title">æ±ºæ¸ˆãŒå®Œäº†ã—ã¾ã—ãŸï¼</h1>
                
                <p style="margin: 20px 0; font-size: 1.1rem;">
                    {selectedPlan === 'premium' ? 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ' : 'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰'}ãƒ—ãƒ©ãƒ³ã¸ã®ã”åŠ å…¥<br>
                    ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼
                </p>

                <div style="background: rgba(15, 23, 42, 0.6); padding: 20px; border-radius: 12px; margin: 30px 0; text-align: left;">
                    <h3 style="color: #3b82f6; margin-bottom: 15px;">âœ… æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>
                    <ul style="list-style: none;">
                        <li style="padding: 8px 0;">ğŸ“§ ç¢ºèªãƒ¡ãƒ¼ãƒ«ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸ</li>
                        <li style="padding: 8px 0;">ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§å…¨æ©Ÿèƒ½ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</li>
                        <li style="padding: 8px 0;">ğŸ‡ ä»Šæ—¥ã®AIäºˆæƒ³ã‚’ã™ãã«ã”è¦§ã„ãŸã ã‘ã¾ã™</li>
                    </ul>
                </div>

                <form method="POST">
                    <input type="hidden" name="action" value="goToDashboard">
                    <input type="hidden" name="plan" value={selectedPlan}>
                    <button type="submit" class="btn btn-success">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸é€²ã‚€</button>
                </form>
            </div>
        )}

        {/* ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ */}
        {showDashboard && (
            <div class="dashboard-preview">
                <div class="dashboard-header">
                    <div>
                        <h2 style="color: #f1f5f9; margin-bottom: 8px;">ä¼šå“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
                        <p style="color: #94a3b8;">ã‚ˆã†ã“ãã€test@example.com ã•ã‚“</p>
                    </div>
                    <div class={`membership-badge ${selectedPlan === 'premium' ? 'premium' : ''}`}>
                        {selectedPlan === 'premium' ? 'ğŸ‘‘ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡' : 'ğŸ“š ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ä¼šå“¡'}
                    </div>
                </div>

                <div class="dashboard-content">
                    <div class="dashboard-card">
                        <h3>ğŸ‡ æœ¬æ—¥ã®äºˆæƒ³</h3>
                        <p style="margin-bottom: 15px;">æœ€æ–°ã®AIäºˆæƒ³ãŒåˆ©ç”¨å¯èƒ½ã§ã™</p>
                        {selectedPlan === 'premium' ? (
                            <p style="color: #10b981;">âœ… 1R-12R å…¨ãƒ¬ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</p>
                        ) : (
                            <p style="color: #f59e0b;">ğŸ“Œ 10Rãƒ»11Rãƒ»12R ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½</p>
                        )}
                    </div>

                    <div class="dashboard-card">
                        <h3>ğŸ“Š åˆ†æãƒ¬ãƒãƒ¼ãƒˆ</h3>
                        <p style="margin-bottom: 15px;">è©³ç´°ãªçµ±è¨ˆãƒ‡ãƒ¼ã‚¿</p>
                        <ul style="list-style: none;">
                            <li>ãƒ»çš„ä¸­ç‡: 87%</li>
                            <li>ãƒ»å›åç‡: 156%</li>
                            <li>ãƒ»ä»Šé€±ã®æˆç¸¾: 12å‹3æ•—</li>
                        </ul>
                    </div>

                    <div class="dashboard-card">
                        <h3>âš™ï¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š</h3>
                        <p style="margin-bottom: 15px;">ãƒ—ãƒ©ãƒ³ç®¡ç†</p>
                        <p>ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³: {selectedPlan === 'premium' ? 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ' : 'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰'}</p>
                        <p>æ¬¡å›æ›´æ–°æ—¥: {new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toLocaleDateString('ja-JP')}</p>
                    </div>

                    {selectedPlan === 'premium' && (
                        <div class="dashboard-card">
                            <h3>ğŸ¯ Premiumé™å®š</h3>
                            <p style="margin-bottom: 15px;">ç‰¹åˆ¥ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</p>
                            <ul style="list-style: none;">
                                <li>ãƒ»AIè©³ç´°åˆ†æ</li>
                                <li>ãƒ»å„ªå…ˆã‚µãƒãƒ¼ãƒˆ</li>
                                <li>ãƒ»é™å®šãƒ¬ãƒãƒ¼ãƒˆ</li>
                            </ul>
                        </div>
                    )}
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <a href="/" class="btn">ğŸ‡ äºˆæƒ³ãƒšãƒ¼ã‚¸ã¸</a>
                    <a href="/dashboard" class="btn btn-secondary">ğŸ“Š å®Ÿéš›ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a>
                    <form method="POST" style="display: inline-block;">
                        <input type="hidden" name="action" value="cancel">
                        <button type="submit" class="btn btn-cancel">ğŸ”„ æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
                    </form>
                </div>
            </div>
        )}

        <div style="text-align: center; margin-top: 60px; padding: 20px; background: rgba(15, 23, 42, 0.4); border-radius: 12px;">
            <p style="color: #64748b;">
                ğŸ¤– å®Œå…¨ãƒ¢ãƒƒã‚¯æ±ºæ¸ˆãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ | ãƒã‚³&ã‚¯ãƒ­ã®æœ€å¼·ã‚³ãƒ³ãƒ“<br>
                <span style="font-size: 0.9rem;">å®Ÿéš›ã®èª²é‡‘ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ãƒ»LocalStorageãƒ™ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆç’°å¢ƒ</span>
            </p>
        </div>
    </div>

    <script>
        // ãƒšãƒ¼ã‚¸é·ç§»æ™‚ã®LocalStorageè¨­å®š
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const step = urlParams.get('step');
            
            // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã«LocalStorageã‚’æ›´æ–°
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    const action = this.querySelector('input[name="action"]')?.value;
                    const plan = this.querySelector('input[name="plan"]')?.value;
                    
                    if (action === 'processPayment' && plan) {
                        // æ±ºæ¸ˆå®Œäº†æ™‚ã«LocalStorageã«ä¿å­˜
                        const mockSubscription = {
                            planType: plan,
                            status: 'active',
                            createdAt: new Date().toISOString()
                        };
                        localStorage.setItem('mock_subscription_' + Date.now(), JSON.stringify(mockSubscription));
                        console.log('Mock subscription saved:', mockSubscription);
                    }
                });
            });
        });
    </script>
</body>
</html>